{"ts":1349718016171,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"dojo.require(\"esri.map\");\r\ndojo.require(\"esri.dijit.Legend\");\r\ndojo.require(\"esri.dijit.Scalebar\");\r\ndojo.require(\"esri.arcgis.utils\");\r\ndojo.require(\"esri.IdentityManager\");\r\ndojo.require(\"dijit.dijit\"); // optimize: load dijit layer\r\ndojo.require(\"dijit.layout.BorderContainer\");\r\ndojo.require(\"dijit.layout.ContentPane\");\r\ndojo.require(\"esri.dijit.TimeSlider\");\r\ndojo.require(\"dojox.fx\");\r\ndojo.requireLocalization(\"esriTemplate\",\"template\");\r\n\r\nvar urlObject, i18n, _maps = [], timeoutComplete = false, timeSlider, _timeProperties = [], timeInterface = false, _thumbIndexes = [], mapsLoaded = 0, mapsReady = false, isPlaying = false, cm, mapExtent;\r\n\r\nvar toBoolean = function (str) {\r\n  switch (str.toLowerCase ()) {\r\n    case \"true\":\r\n      return true;\r\n    case \"false\":\r\n      return false;\r\n    default:\r\n      return true;\r\n  }\r\n};\r\n\r\nfunction initMap(){\r\n\tpatchID();\r\n\t\r\n\ti18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\r\n\tdojo.byId('loading').innerHTML = i18n.viewer.loading.message;\r\n\tdojo.byId('legendHeaderText').innerHTML = i18n.viewer.sidePanel.legendHeader;\r\n      \r\n      if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\r\n        configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\r\n      }\r\n      esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);  \r\n      \r\n\r\n\r\n      if(!configOptions.sharingurl){\r\n        configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\r\n      }\r\n      esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\r\n       \r\n      if(!configOptions.proxyurl){   \r\n        configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\r\n      }\r\n\r\n      esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\r\n\r\n      esri.config.defaults.io.alwaysUseProxy = false;\r\n      \r\n      urlObject = esri.urlToObject(document.location.href);\r\n      urlObject.query = urlObject.query || {};\r\n      \r\n      if(urlObject.query.title){\r\n        configOptions.title = urlObject.query.title;\r\n      }\r\n      if(urlObject.query.subtitle){\r\n        configOptions.subtitle = urlObject.query.subtitle;\r\n      }\r\n\t  if(urlObject.query.description){\r\n        configOptions.description = urlObject.query.description;\r\n      }\r\n\t  if(urlObject.query.displayDescription){\r\n        configOptions.displayDescription = toBoolean(urlObject.query.displayDescription);\r\n      }\r\n\t  if(urlObject.query.displayLegend){\r\n        configOptions.displayLegend = toBoolean(urlObject.query.displayLegend);\r\n      }\r\n\t  if(urlObject.query.loop){\r\n        configOptions.loop = toBoolean(urlObject.query.loop);\r\n      }\r\n\t  if(urlObject.query.syncMaps){\r\n        configOptions.syncMaps = toBoolean(urlObject.query.syncMaps);\r\n      }\r\n      if(urlObject.query.webmap){\r\n\t\t  if (dojo.isArray(urlObject.query.webmap) == false){\r\n        \tconfigOptions.webmaps[0].id = urlObject.query.webmap;\r\n\t\t  }\r\n\t\t  else{\r\n\t\t\tdojo.forEach(urlObject.query.webmap,function(webmap,i){\r\n\t\t\t  configOptions.webmaps[i] = {\"id\": webmap};\r\n\t\t\t  if(urlObject.query.tabTitle){\r\n\t\t\t\t  if (configOptions.tabTitles[i] == null || configOptions.tabTitles[i].title == \"\"){\r\n\t\t\t\t\t  if (dojo.isArray(urlObject.query.tabTitle) == false){\r\n\t\t\t\t\t\tif (i == 0){\r\n\t\t\t\t\t\t\tconfigOptions.tabTitles[0] = {\"title\": urlObject.query.tabTitle} || {\"title\": \"\"};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tconfigOptions.tabTitles[i] = {\"title\": \"\"};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t  else{\r\n\t\t\t\t\t\tconfigOptions.tabTitles[i] = {\"title\": urlObject.query.tabTitle[i]} || {\"title\": \"\"};\r\n\t\t\t\t\t  }\r\n\t\t\t\t  }\r\n\t\t\t  }\r\n\t\t\t  else{\r\n\t\t\t\t  configOptions.tabTitles[i] = {\"title\": \"\"};\r\n\t\t\t  }\r\n\t\t\t});\r\n\t\t  }\t\r\n      } \r\n      if(urlObject.query.bingMapsKey){\r\n        configOptions.bingmapskey = urlObject.query.bingMapsKey;      \r\n      }\r\n\t  \r\n\t  //is an appid specified - if so read json from there\r\n\t  if(configOptions.appid || (urlObject.query && urlObject.query.appid)){\r\n\t\tvar appid = configOptions.appid || urlObject.query.appid;\r\n\t\tvar requestHandle = esri.request({\r\n\t\t  url: configOptions.sharingurl + \"/\" + appid + \"/data\",\r\n\t\t  content: {f:\"json\"},\r\n\t\t  callbackParamName:\"callback\",\r\n\t\t  load: function(response){\r\n\t\t\t   if(response.values.title !== undefined){configOptions.title = response.values.title;}\r\n\t\t\t   if(response.values.subtitle !== undefined){configOptions.subtitle = response.values.subtitle;}\r\n\t\t\t   if(response.values.description !== undefined){configOptions.description = response.values.description;}\r\n\t\t\t   if(response.values.loop !== undefined){configOptions.loop = response.values.loop;}\r\n\t\t\t   if(response.values.displayDescription !== undefined){configOptions.displayDescription = response.values.displayDescription; }\r\n\t\t\t   if(response.values.displayLegend !== undefined) {configOptions.displayLegend = response.values.displayLegend;}\r\n\t\t\t   if(response.values.syncMaps !== undefined) {configOptions.syncMaps = response.values.syncMaps;}\r\n\t\t\t   if(response.values.webmaps !== undefined) {configOptions.webmaps = getWebMaps(response.values.webmaps);}\r\n\t\t\t   if(response.values.tabs !== undefined) {configOptions.tabTitles = getTabs(response.values.tabs);}\r\n    \r\n\t\t\t   createMap();\r\n\t\t  },\r\n\t\t  error: function(response){\r\n\t\t\tvar e = response.message;\r\n\t\t   alert(i18n.viewer.errors.createMap +  response.message);\r\n\t\t  }\r\n\t\t});\r\n\t\t }else{\r\n\t\t\tcreateMap();\r\n\t\t }\r\n}\r\n\r\nfunction createMap(){\r\n\tdojo.forEach(configOptions.webmaps, function(arg,i){\r\n\t\t\r\n\t\tif(configOptions.tabTitles[i] == null){\r\n\t\t\tconfigOptions.tabTitles[i] = {\"title\": \"\"};\r\n\t\t}\r\n\t\t\r\n\t\tdojo.place(\"<div id='mapDiv\"+i+\"' class='map'></div>\",dojo.byId('mapPane'),\"last\");\r\n\t\tif (configOptions.webmaps.length > 1){\r\n\t\t\tdojo.place(\"<h3 id='title\"+i+\"' class='mapTitle'></h3>\",dojo.byId('descriptionPanel'),\"last\");\r\n\t\t\tdojo.place(\"<div id='tab\"+i+\"' class='tab' onclick='changeMap(\"+i+\")'><p id='tabText\"+i+\"' class='tabText'></p></div>\",dojo.byId('tabArea'),\"last\");\r\n\t\t\tdojo.addClass(dojo.byId(\"tab0\"),\"selected\");\r\n\t\t}\r\n\t\tdojo.place(\"<div id='description\"+i+\"' class='description'></div>\",dojo.byId('descriptionPanel'),\"last\");\r\n\t\tdojo.place(\"<div id='legend\"+i+\"' class='legend'></div>\",dojo.byId('legendPanel'),\"last\");\r\n\t\t\r\n\t\tvar mapDeferred = esri.arcgis.utils.createMap(arg.id, \"mapDiv\"+i, {\r\n\t\t\tmapOptions: {\r\n\t\t\t\tslider: true,\r\n\t\t\t\tnav: false,\r\n\t\t\t\twrapAround180:true\r\n\t\t\t},\r\n\t\t\tignorePopups:false,\r\n\t\t\tbingMapsKey: configOptions.bingmapskey\r\n\t\t});\r\n\t\t\r\n\t\tmapDeferred.addCallback(function (response) {\r\n\t\t\t\r\n\t\t\tvar map = response.map\r\n\t\t\t_maps[i] = map;\r\n\t\t\t\r\n\t\t\tdojo.connect(map,'onClick',stopTime);\r\n\t\t\tdojo.connect(map,'onExtentChange',syncExtents)\r\n\t\t\tdojo.connect(map,\"onUpdateEnd\",function(){\r\n\t\t\t\tmapLoaded();\r\n\t\t\t\tplayAnimation();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif (i == 0){\r\n\t\t\t\tdocument.title = configOptions.title|| response.itemInfo.item.title || \"\";\r\n        \t\tdojo.byId(\"title\").innerHTML = configOptions.title ||response.itemInfo.item.title || \"\";\r\n        \t\tdojo.byId(\"subtitle\").innerHTML = configOptions.subtitle|| response.itemInfo.item.snippet || \"\";\r\n\t\t\t\tdojo.byId(\"description0\").innerHTML = configOptions.description|| response.itemInfo.item.description || \"\";\r\n\t\t\t\tif (configOptions.webmaps.length > 1){\r\n\t\t\t\t\tdojo.byId(\"title0\").innerHTML = response.itemInfo.item.title || \"\";\r\n\t\t\t\t\tdojo.byId(\"description0\").innerHTML = response.itemInfo.item.description || \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (configOptions.webmaps.length > 1){\r\n\t\t\t\tdojo.byId(\"tabText\"+i).innerHTML = configOptions.tabTitles[i].title || response.itemInfo.item.title || \"\";\r\n\t\t\t\tdojo.byId(\"title\"+i).innerHTML = response.itemInfo.item.title || \"\";\r\n\t\t\t\tdojo.byId(\"description\"+i).innerHTML = response.itemInfo.item.description || \"\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar layers = response.itemInfo.itemData.operationalLayers;\r\n\t\t\t\r\n\t\t\tif(response.itemInfo.itemData.widgets && response.itemInfo.itemData.widgets.timeSlider){\r\n\t\t\t\t_timeProperties[i] =  response.itemInfo.itemData.widgets.timeSlider.properties;\r\n\t\t\t\ttimeInterface = true;\r\n\t\t\t}\r\n\t\t\taddTabsAndTime();\r\n\t\t\t\r\n\t\t\tif(map.loaded){\r\n          \t\tinitUI(layers,i,map);\r\n        \t}\r\n        \telse{\r\n          \t\tdojo.connect(map,\"onLoad\",function(){\r\n\t\t\t\t\tinitUI(layers,i,map);\r\n\t\t\t\t});\r\n        \r\n\t\t\t}\t\t\r\n        \t//resize the map when the browser resizes\r\n\t\t\tdojo.connect(dijit.byId('mapPane'), 'resize', function(){\r\n\t\t\t\tdojo.forEach(_maps,function(map){\r\n\t\t\t\t\tif (map != null){\r\n\t\t\t\t\t\tmap.resize();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcenterTimeDisplay();\r\n\t\t\t});\r\n       \r\n\t  \t});\r\n\r\n      mapDeferred.addErrback(function (error) {\r\n          alert(i18n.viewer.errors.createMap + \" \" + dojo.toJson(error.message));\r\n\t\t  mapsLoaded = configOptions.webmaps.length - 1;\r\n\t\t  mapLoaded();\r\n\t\t  dojo.destroy(dojo.byId(\"tab\"+i));\r\n\t\t  if (i==0){\r\n\t\t      alert(i18n.viewer.errors.timeout);\r\n\t\t  }\r\n      });\r\n\t\t\r\n\t});\r\n\t\r\n\tsetupLayout();\r\n}\r\n\r\n\r\nfunction initUI(layers,index,map) {\r\n\t//add chrome theme for popup\r\n    dojo.addClass(map.infoWindow.domNode, \"chrome\");\r\n    //add the scalebar \r\n    var scalebar = new esri.dijit.Scalebar({\r\n\t\tmap: map,\r\n        scalebarUnit: i18n.viewer.main.scaleBarUnits //metric or english\r\n    }); \r\n\r\n    var layerInfo = buildLayersList(layers);      \r\n\r\n    if(layerInfo.length > 0){\r\n\t\tvar legendDijit = new esri.dijit.Legend({\r\n\t\t\tmap:map,\r\n\t\t\tlayerInfos:layerInfo\r\n\t\t},\"legend\"+index);\r\n        legendDijit.startup();\r\n    }\r\n    else{\r\n        dojo.byId(\"legend\"+index).innerHTML = \"\";\r\n    }\r\n\tif (timeSlider == null){\r\n\t\tif(_timeProperties[index] != null){\r\n\t\t\tif(cm == null){\r\n\t\t\t\tcm = index;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar startTime = _timeProperties[index].startTime;\r\n\t\t\tvar endTime = _timeProperties[index].endTime;\r\n\t\t    var fullTimeExtent = new esri.TimeExtent(new Date(startTime), new Date(endTime));\r\n\t\t\tmap.setTimeExtent(fullTimeExtent);\r\n\t\t\t\r\n\t\t\ttimeSlider = new esri.dijit.TimeSlider({\r\n\t\t\t\tstyle: \"width: 100%;\",\r\n\t\t\t\tloop: configOptions.loop\r\n\t\t  \t}, dojo.byId(\"timeSliderDiv\"));\r\n\t\t\t\r\n\t\t\tmap.setTimeSlider(timeSlider);\r\n\t\t\t\r\n\t\t\ttimeSlider.setThumbCount(_timeProperties[index].thumbCount);\r\n\t\t    timeSlider.setThumbMovingRate(_timeProperties[index].thumbMovingRate);\r\n\t\t\t\r\n\t\t\tif(_timeProperties[index].numberOfStops){\r\n\t\t\t\ttimeSlider.createTimeStopsByCount(fullTimeExtent,_timeProperties[index].numberOfStops);\r\n\t\t  \t}\r\n\t\t\telse{\r\n\t\t\t\ttimeSlider.createTimeStopsByTimeInterval(fullTimeExtent,_timeProperties[index].timeStopInterval.interval,_timeProperties[index].timeStopInterval.units);\r\n\t\t  \t}\r\n\t\t\t\r\n\t\t  \tif(timeSlider.thumbCount == 2){\r\n\t\t\t\ttimeSlider.setThumbIndexes([0,1]);\r\n\t\t  \t}\r\n\t\t\t\r\n\t\t\tdojo.connect(timeSlider,'onTimeExtentChange',function(timeExtent){\r\n\t\t\t\t\r\n\t\t\t\tvar timeCon = dojo.query(\"#timeSliderDiv > table > tbody > tr > td\");\r\n\t\t\t\tdojo.place(\"<img id='playPause' class='timeControl' src='images/playIcon.png' alt='' onClick='animate()'>\",timeCon[0],'last');\r\n\t\t\t\tdojo.place(\"<img id='prev' class='timeControl' src='images/prevIcon.png' alt='' onClick='prevTime()'>\",timeCon[2],'last');\r\n\t\t\t\tdojo.place(\"<img id='next' class='timeControl' src='images/nextIcon.png' alt='' onClick='nextTime()'>\",timeCon[3],'last');\r\n\t\t\t\t\r\n\t\t\t\t_thumbIndexes[cm] = timeSlider.thumbIndexes\r\n\t\t\t\twaitForLoad();\r\n\t\t\t\tvar timeString; \r\n\t\t\t\tif(_timeProperties[cm].timeStopInterval !== undefined){\r\n\t\t\t\t\tswitch(_timeProperties[cm].timeStopInterval.units){   \r\n\t\t\t\t\t\tcase 'esriTimeUnitsCenturies':\t\r\n\t\t\t  \t\t\t\tdatePattern = 'yyyy G'\r\n\t\t\t  \t\t\t\tbreak;          \r\n\t\t\t\t\t\tcase 'esriTimeUnitsDecades':\r\n\t\t\t  \t\t\t\tdatePattern = 'yyyy'\r\n\t\t\t  \t\t\t\tbreak;  \r\n\t\t\t \t\t\tcase 'esriTimeUnitsYears':\r\n\t\t\t  \t\t\t\tdatePattern = 'MMMM yyyy'\r\n\t\t\t \t\t\t\t break;\r\n\t\t\t\t\t\tcase 'esriTimeUnitsWeeks':\t \r\n\t\t\t  \t\t\t\tdatePattern = 'MMMM d, yyyy'\r\n\t\t\t  \t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'esriTimeUnitsDays':\r\n\t\t\t  \t\t\t\tdatePattern = 'MMMM d, yyyy'\r\n\t\t\t  \t\t\t\tbreak;        \r\n\t\t\t\t\t\tcase 'esriTimeUnitsHours':\r\n\t\t\t  \t\t\t\tdatePattern = 'h:m:s.SSS a'\r\n\t\t\t  \t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'esriTimeUnitsMilliseconds':\r\n\t\t\t  \t\t\t\tdatePattern = 'h:m:s.SSS a'\r\n\t\t\t  \t\t\t\tbreak;          \r\n\t\t\t\t\t\tcase 'esriTimeUnitsMinutes':\r\n\t\t\t  \t\t\t\tdatePattern = 'h:m:s.SSS a'\r\n\t\t\t \t\t\t\tbreak;          \r\n\t\t\t\t\t\tcase 'esriTimeUnitsMonths':\r\n\t\t\t  \t\t\t\tdatePattern = 'MMMM d, y'\r\n\t\t\t  \t\t\t\tbreak;          \r\n\t\t\t\t\t\tcase 'esriTimeUnitsSeconds':\r\n\t\t\t  \t\t\t\tdatePattern = 'h:m:s.SSS a'\r\n\t\t\t  \t\t\t\tbreak;          \r\n\t\t  \t\t\t}\r\n\t\t   \t\t\ttimeString = formatDate(timeExtent.startTime,datePattern) + \" to \" + formatDate(timeExtent.endTime,datePattern);\r\n\t\t  \t\t}\r\n\t\t  \t\telse{\r\n\t\t\t\t\ttimeString = formatDate(timeExtent.endTime,'MMMM d,yyyy');\r\n\t\t  \t\t}\r\n\t\t\r\n\t\t\tdojo.byId('timeDisplay').innerHTML = timeString;\r\n\t\t\t\r\n\t\t\tcenterTimeDisplay();\r\n\t\t\t\t\r\n\t\t  });\r\n\t\t\t\r\n\t\t\ttimeSlider.startup();\r\n\t\t\t\r\n\t\t\tdojo.forEach(dojo.query(\".timeControl\"),function(qry){\r\n\t\t\t\tdojo.style(qry,\"display\",\"block\");\r\n\t\t\t});\r\n\t\t\tdojo.place(\"<div id='timeSliderBlind'></div>\",dojo.byId(\"timeSliderArea\"),\"last\");\r\n\t\t\tdojo.style(dojo.byId(\"timeSliderBlind\"),\"opacity\", \"0.8\");\r\n\t\t\t\r\n\t\t\tdojo.connect(dojo.byId(\"next\"),'onmousedown',function(){\r\n\t\t\t\tdojo.byId(\"next\").setAttribute(\"src\",\"images/nextIconDark.png\");\r\n\t\t\t});\r\n\t\t\tdojo.connect(dojo.byId(\"next\"),\"onmouseup\",function(){\r\n\t\t\t\tdojo.byId(\"next\").setAttribute(\"src\",\"images/nextIcon.png\");\r\n\t\t\t});\r\n\t\t\tdojo.connect(dojo.byId(\"prev\"),'onmousedown',function(){\r\n\t\t\t\tdojo.byId(\"prev\").setAttribute(\"src\",\"images/prevIconDark.png\");\r\n\t\t\t});\r\n\t\t\tdojo.connect(dojo.byId(\"prev\"),\"onmouseup\",function(){\r\n\t\t\t\tdojo.byId(\"prev\").setAttribute(\"src\",\"images/prevIcon.png\");\r\n\t\t\t});\r\n\t\t\tdojo.connect(dojo.byId(\"playPause\"),'onmousedown',function(){\r\n\t\t\t\tif (dojo.attr(dojo.byId(\"playPause\"),\"src\") == \"images/playIcon.png\"){\r\n\t\t\t\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/playIconDark.png\");\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/pauseIconDark.png\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction buildLayersList(layers){\r\n        //layers  arg is  response.itemInfo.itemData.operationalLayers;\r\n        var layerInfos = [];\r\n        dojo.forEach(layers, function(mapLayer, index){\r\n          var layerInfo = {};\r\n          if (mapLayer.featureCollection && mapLayer.type !== \"CSV\") {\r\n            if (mapLayer.featureCollection.showLegend === true) {\r\n              dojo.forEach(mapLayer.featureCollection.layers, function(fcMapLayer){\r\n                if (fcMapLayer.showLegend !== false) {\r\n                  layerInfo = {\r\n                    \"layer\": fcMapLayer.layerObject,\r\n                    \"title\": mapLayer.title,\r\n                    \"defaultSymbol\": false\r\n                  };\r\n                  if (mapLayer.featureCollection.layers.length > 1) {\r\n                    layerInfo.title += \" - \" + fcMapLayer.layerDefinition.name;\r\n                  }\r\n                  layerInfos.push(layerInfo);\r\n                }\r\n              });\r\n            }\r\n          } else if (mapLayer.showLegend !== false) {\r\n            layerInfo = {\r\n              \"layer\": mapLayer.layerObject,\r\n              \"title\": mapLayer.title,\r\n              \"defaultSymbol\": false\r\n            };\r\n            //does it have layers too? If so check to see if showLegend is false\r\n            if (mapLayer.layers) {\r\n              var hideLayers = dojo.map(dojo.filter(mapLayer.layers, function(lyr){\r\n                return (lyr.showLegend === false);\r\n              }), function(lyr){\r\n                return lyr.id\r\n              });\r\n              if (hideLayers.length) {\r\n                layerInfo.hideLayers = hideLayers;\r\n              }\r\n            }\r\n            layerInfos.push(layerInfo);\r\n          }\r\n        });\r\n        return layerInfos;\r\n      }\r\n\r\n\r\nfunction formatDate(date,datePattern){\r\n\treturn dojo.date.locale.format(date, {\r\n    \tselector: 'date',\r\n        datePattern: datePattern\r\n\t});\r\n}\r\n\r\nfunction mapLoaded(){\r\n\tvar timeout = setTimeout(\"timeoutError()\",10000);\r\n\tif (mapsLoaded == configOptions.webmaps.length - 1){\r\n\t\tif (mapsLoaded == configOptions.webmaps.length - 1){\r\n\t\t\tif (configOptions.webmaps.length == 1){\r\n\t\t\t\tif (_timeProperties[0] != null){\r\n\t\t\t\t\tdojo.style(dojo.byId(\"tabArea\"),\"height\",\"0px\");\r\n\t\t\t\t\tdojo.style(dojo.byId(\"banner\"),\"height\",\"165px\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdojo.forEach(_maps,function(map,i){\r\n\t\t\t\tif (i != 0){\r\n\t\t\t\t\tdojo.fadeOut({\r\n\t\t\t\t\t\tnode: dojo.byId(\"mapDiv\"+i),\r\n\t\t\t\t\t\tduration: 300\r\n\t\t\t\t\t}).play();\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tdojo.style(dojo.byId(\"legend\"+i),\"display\",\"block\");\r\n\t\t\t\t\tdojo.style(dojo.byId(\"description\"+i),\"display\",\"block\");\r\n\t\t\t\t\tif (configOptions.webmaps.length > 1){\r\n\t\t\t\t\t\tdojo.style(dojo.byId(\"title\"+i),\"display\",\"block\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdojo.place(dojo.byId('mapDiv0'),dojo.byId('mapPane'),'last');\r\n\t\t\tdojo.fadeOut({\r\n\t\t\t\tnode: dojo.byId(\"mapBlind\"),\r\n\t\t\t\tduration: 500\r\n\t\t\t}).play();\r\n\t\t\tvar t = setTimeout(\"dojo.style(dojo.byId('mapBlind'),'display','none')\",500);\r\n\t\t\tif (_timeProperties[0] == null){\r\n\t\t\t\tdojo.fadeOut({\r\n\t\t\t\t\tnode: dojo.byId(\"timeDisplay\"),\r\n\t\t\t\t\tduration: 1\r\n\t\t\t\t}).play();\r\n\t\t\t\tdojo.style(dojo.byId('timeDisplay'),'z-index','0');\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdojo.fadeOut({\r\n\t\t\t\t\tnode: dojo.byId(\"timeSliderBlind\"),\r\n\t\t\t\t\tduration: 500\r\n\t\t\t\t}).play();\r\n\t\t\t\tvar t = setTimeout(\"dojo.style(dojo.byId('timeSliderBlind'),'display','none')\",500);\r\n\t\t\t}\r\n\t\t\tmapsReady = true;\r\n\t\t\tmapsLoaded++\r\n\t\t\tdijit.byId(\"mainWindow\").layout();\r\n\t\t\tcm = 0;\r\n\t\t\tsyncExtents();\r\n\t\t\tesri.hide(dojo.byId(\"loadingCon\"));\r\n\t\t}\r\n\t\telse{\r\n\t\t\tmapsLoaded++\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction animate(){\r\n\tif(_timeProperties[cm] != null){\r\n\t\tif (isPlaying == false){\r\n\t\t\tisPlaying = true;\r\n\t\t\tplayAnimation();\r\n\t\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/pauseIcon.png\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\tisPlaying = false;\r\n\t\t\ttimeSlider.pause();\r\n\t\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/playIcon.png\");\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction stopTime(){\r\n\tif (timeSlider){\r\n\t\tisPlaying = false;\r\n\t\ttimeSlider.pause();\r\n\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/playIcon.png\");\r\n\t}\r\n}\r\n\r\nfunction playAnimation(){\r\n\tif(_timeProperties[cm] != null){\r\n\t\tif (isPlaying == true){\r\n\t\t\ttimeSlider.play();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction waitForLoad(){\r\n\tif(_timeProperties[cm] != null){\r\n\t\ttimeSlider.pause();\r\n\t}\r\n}\r\n\r\nfunction prevTime(){\r\n\tif(_timeProperties[cm] != null){\r\n\t\tisPlaying = false;\r\n\t\ttimeSlider.pause();\r\n\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/playIcon.png\");\r\n\t\ttimeSlider.previous();\r\n\t}\t\r\n}\r\n\r\nfunction nextTime(){\r\n\tif(_timeProperties[cm] != null){\r\n\t\tisPlaying = false;\r\n\t\ttimeSlider.pause();\r\n\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/playIcon.png\");\r\n\t\ttimeSlider.next();\r\n\t}\r\n}\r\n\r\nfunction syncExtents(){\r\n\tif (configOptions.syncMaps == true){\r\n\t\tif (_maps[cm]){\r\n\t\t\tif (_maps[cm].extent != mapExtent){\r\n\t\t\t\tmapExtent = _maps[cm].extent;\r\n\t\t\t\tdojo.forEach(_maps,function(map,i){\r\n\t\t\t\t\tif (i != cm){\r\n\t\t\t\t\t\tif(map){\r\n\t\t\t\t\t\t\tmap.setExtent(mapExtent);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction patchID() {  //patch id manager for use in apps.arcgis.com\r\n       esri.id._isIdProvider = function(server, resource) {\r\n       // server and resource are assumed one of portal domains\r\n \r\n       var i = -1, j = -1;\r\n \r\n       dojo.forEach(this._gwDomains, function(domain, idx) {\r\n         if (i === -1 && domain.regex.test(server)) {\r\n           i = idx;\r\n         }\r\n         if (j === -1 && domain.regex.test(resource)) {\r\n           j = idx;\r\n         }\r\n       });\r\n \r\n       var retVal = false;\r\n   \r\n       if (i > -1 && j > -1) {\r\n         if (i === 0 || i === 4) {\r\n           if (j === 0 || j === 4) {\r\n             retVal = true;\r\n           }\r\n         }\r\n         else if (i === 1) {\r\n           if (j === 1 || j === 2) {\r\n             retVal = true;\r\n           }\r\n         }\r\n         else if (i === 2) {\r\n           if (j === 2) {\r\n             retVal = true;\r\n           }\r\n         }\r\n         else if (i === 3) {\r\n           if (j === 3) {\r\n             retVal = true;\r\n           }\r\n         }\r\n       }\r\n \r\n       return retVal;\r\n     };    \r\n    }\r\n\t\r\n\tfunction getWebMaps(webmaps) {\r\n\t  if (webmaps.indexOf(',') !== -1) {\r\n\t\tvar mapIds = webmaps.split(',');\r\n\t\twebmapresults = dojo.map(mapIds, function (mapId) {\r\n\t\t  return {\r\n\t\t\tid: mapId\r\n\t\t  };\r\n\t\t});\r\n\t  } else {\r\n\t\tvar previewWebMap = {\r\n\t\t  id: webmaps\r\n\t\t};\r\n\t\twebmapresults = [previewWebMap, previewWebMap, previewWebMap];\r\n\t  }\r\n\t  return webmapresults;\r\n\t}\r\n\t\r\n\tfunction getTabs(tabs){\r\n\t\tif (tabs.indexOf(',') !== -1) {\r\n\t\tvar mapIds = tabs.split(',');\r\n\t\ttabresults = dojo.map(mapIds, function (mapId) {\r\n\t\t  return {\r\n\t\t\ttitle: mapId\r\n\t\t  };\r\n\t\t});\r\n\t  } else {\r\n\t\tvar previewTab = {\r\n\t\t  title: tabs\r\n\t\t};\r\n\t\ttabresults = [previewTab, previewTab, previewTab];\r\n\t  }\r\n\t  return tabresults;\r\n\t}\r\n\t\r\n\tfunction timeoutError(){\r\n\t\tif (timeoutComplete == false && mapsLoaded < configOptions.webmaps.length - 1){\r\n\t\t\ttimeoutComplete = true;\r\n\t\t\tmapsLoaded = configOptions.webmaps.length - 1;\r\n\t\t\tmapLoaded();\r\n\t\t}\r\n\t}"]],"start1":0,"start2":0,"length1":0,"length2":20820}]],"length":20820}
{"contributors":[],"silentsave":true,"ts":1349718143758,"patch":[[{"diffs":[[0,"\r\n\r\n\r\n\r\n\r\n\r\n"],[1,"//build a list of layers to dispaly in the legend\r\n  "],[0,"function bui"]],"start1":13789,"start2":13789,"length1":24,"length2":77},{"diffs":[[0,"yers){\r\n"],[-1,"       "],[1,"\r\n"],[0," //layer"]],"start1":13881,"start2":13881,"length1":23,"length2":18},{"diffs":[[0,"ayers;\r\n"],[-1,"      "],[0,"  var la"]],"start1":13949,"start2":13949,"length1":22,"length2":16},{"diffs":[[0," = [];\r\n"],[-1,"      "],[0,"  dojo.f"]],"start1":13973,"start2":13973,"length1":22,"length2":16},{"diffs":[[0,"rs, function"],[1," "],[0,"(mapLayer, i"]],"start1":14000,"start2":14000,"length1":24,"length2":25},{"diffs":[[0,", index)"],[1," "],[0,"{\r\n     "]],"start1":14022,"start2":14022,"length1":16,"length2":17},{"diffs":[[0,"x) {\r\n      "],[-1,"   "],[-1," "],[0,"var layerInf"]],"start1":14028,"start2":14028,"length1":28,"length2":24},{"diffs":[[0,"Info = {};\r\n"],[-1,"    "],[0,"      if (ma"]],"start1":14049,"start2":14049,"length1":28,"length2":24},{"diffs":[[0,"SV\") {\r\n        "],[-1,"   "],[-1," "],[0,"if (mapLayer.fea"]],"start1":14121,"start2":14121,"length1":36,"length2":32},{"diffs":[[0,"== true) {\r\n"],[-1,"  "],[0,"            "]],"start1":14180,"start2":14180,"length1":26,"length2":24},{"diffs":[[0,"function"],[1," "],[0,"(fcMapLa"]],"start1":14252,"start2":14252,"length1":16,"length2":17},{"diffs":[[0,"apLayer)"],[1," "],[0,"{\r\n"],[-1,"  "],[0,"        "]],"start1":14265,"start2":14265,"length1":21,"length2":20},{"diffs":[[0,"                "],[1,"  "],[0,"\"layer\": fcMapLa"]],"start1":14368,"start2":14368,"length1":32,"length2":34},{"diffs":[[0,"                "],[1,"  "],[0,"\"title\": mapLaye"]],"start1":14424,"start2":14424,"length1":32,"length2":34},{"diffs":[[0,"apLayer.title,\r\n"],[1,"  "],[0,"                "]],"start1":14452,"start2":14452,"length1":32,"length2":34},{"diffs":[[0,"gth > 1) {\r\n"],[1,"  "],[0,"            "]],"start1":14595,"start2":14595,"length1":24,"length2":26},{"diffs":[[0,"\r\n              "],[-1,"  "],[0,"}\r\n"],[-1,"  "],[0,"            });\r"]],"start1":14756,"start2":14756,"length1":39,"length2":35},{"diffs":[[0," });\r\n          "],[-1,"  "],[0,"}\r\n          } e"]],"start1":14786,"start2":14786,"length1":34,"length2":32},{"diffs":[[0,"\r\n      "],[-1,"  "],[-1,"  "],[0,"} else i"]],"start1":14803,"start2":14803,"length1":20,"length2":16},{"diffs":[[0,"alse"],[-1,") {\r\n            layerInfo = {"],[1," && mapLayer.layerObject) {\r\n      var showDefaultSymbol = false;\r\n      if (mapLayer.layerObject.version < 10.1 && (mapLayer.layerObject instanceof esri.layers.ArcGISDynamicMapServiceLayer || mapLayer.layerObject instanceof esri.layers.ArcGISTiledMapServiceLayer)) {\r\n        showDefaultSymbol = true;"],[0,"\r\n    "],[1,"  }\r\n"],[0,"  "],[1,"    layerInfo = {\r\n"],[0,"    "]],"start1":14847,"start2":14847,"length1":46,"length2":342},{"diffs":[[0,"bject,\r\n        "],[-1,"      "],[0,"\"title\": mapLaye"]],"start1":15217,"start2":15217,"length1":38,"length2":32},{"diffs":[[0,"apLayer.title,\r\n"],[-1,"      "],[0,"        \"default"]],"start1":15243,"start2":15243,"length1":38,"length2":32},{"diffs":[[0,"l\": "],[-1,"false\r\n     "],[1,"showDefaultSymbol\r\n"],[0,"      "],[-1," "],[0,"};\r\n"],[-1,"    "],[0,"    "]],"start1":15280,"start2":15280,"length1":35,"length2":37},{"diffs":[[0," false\r\n        "],[-1,"    "],[0,"if (mapLayer.lay"]],"start1":15383,"start2":15383,"length1":36,"length2":32},{"diffs":[[0,"            "],[-1," "],[-1," "],[0,"var hideLaye"]],"start1":15423,"start2":15423,"length1":26,"length2":24},{"diffs":[[0,"layers, function"],[1," "],[0,"(lyr)"],[1," "],[0,"{\r\n             "]],"start1":15482,"start2":15482,"length1":37,"length2":39},{"diffs":[[0,"        "],[-1," "],[-1," "],[0,"}), func"]],"start1":15564,"start2":15564,"length1":18,"length2":16},{"diffs":[[0,"function"],[1," "],[0,"(lyr)"],[1," "],[0,"{\r\n     "]],"start1":15576,"start2":15576,"length1":21,"length2":23},{"diffs":[[0,"n lyr.id"],[1,";"],[0,"\r\n      "]],"start1":15615,"start2":15615,"length1":16,"length2":17},{"diffs":[[0,"            "],[-1,"  "],[0,"});\r\n"],[-1,"  "],[0,"            "]],"start1":15626,"start2":15626,"length1":33,"length2":29},{"diffs":[[0,"s;\r\n            "],[-1,"  "],[0,"}\r\n            }"]],"start1":15729,"start2":15729,"length1":34,"length2":32},{"diffs":[[0," }\r\n        "],[-1," "],[-1,"   }\r\n    "],[1,"}\r\n"],[0,"        laye"]],"start1":15744,"start2":15744,"length1":35,"length2":27},{"diffs":[[0,"    "],[-1,"      }\r\n        });\r\n      "],[1,"}\r\n  });\r\n"],[0,"  re"]],"start1":15796,"start2":15796,"length1":36,"length2":18},{"diffs":[[0,"erInfos;\r\n  "],[-1,"    }"],[1,"}\r\n"],[0,"\r\n\r\n\r\nfuncti"]],"start1":15822,"start2":15822,"length1":29,"length2":27}]],"length":21091,"saved":false}
{"ts":1349718144452,"patch":[[{"diffs":[[0,"hID();\r\n"],[-1,"\t"],[0,""],[1,""],[0,"\r\n\ti18n "]],"start1":872,"start2":872,"length1":17,"length2":16},{"diffs":[[0,"eader;\r\n"],[-1,"      "],[0,""],[1,""],[0,"\r\n      "]],"start1":1081,"start2":1081,"length1":22,"length2":16},{"diffs":[[0,"iceurl);"],[-1,"  \r\n      "],[1,"\r\n"],[0,"\r\n\r\n\r\n  "]],"start1":1385,"start2":1385,"length1":26,"length2":18},{"diffs":[[0,"ngurl;\r\n"],[-1,"       "],[0,"\r\n      "]],"start1":1608,"start2":1608,"length1":23,"length2":16},{"diffs":[[0,"oxyurl){"],[-1,"   "],[0,"\r\n      "]],"start1":1644,"start2":1644,"length1":19,"length2":16},{"diffs":[[0,"false;\r\n"],[-1,"      "],[0,""],[1,""],[0,"\r\n      "]],"start1":1876,"start2":1876,"length1":22,"length2":16},{"diffs":[[0,"|| {};\r\n"],[-1,"      "],[0,""],[1,""],[0,"\r\n      "]],"start1":1987,"start2":1987,"length1":22,"length2":16},{"diffs":[[0,";\r\n\t\t  }"],[-1,"\t"],[0,"\r\n      "]],"start1":3686,"start2":3686,"length1":17,"length2":16},{"diffs":[[0,"\n      }"],[-1," "],[0,"\r\n      "]],"start1":3695,"start2":3695,"length1":17,"length2":16},{"diffs":[[0,"MapsKey;"],[-1,"      "],[0,""],[1,""],[0,"\r\n      "]],"start1":3801,"start2":3801,"length1":22,"length2":16},{"diffs":[[0,"     }\r\n"],[-1,"\t  "],[0,""],[1,""],[0,"\r\n\t  //i"]],"start1":3812,"start2":3812,"length1":19,"length2":16},{"diffs":[[0,"abs);}\r\n"],[-1,"    "],[0,""],[1,""],[0,"\r\n\t\t\t   "]],"start1":5164,"start2":5164,"length1":20,"length2":16},{"diffs":[[0,"rg,i){\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t\tif(c"]],"start1":5450,"start2":5450,"length1":18,"length2":16},{"diffs":[[0," \"\"};\r\n\t\t}\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t\tdojo.pla"]],"start1":5544,"start2":5544,"length1":26,"length2":24},{"diffs":[[0,"),\"last\");\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t\tvar mapD"]],"start1":6184,"start2":6184,"length1":26,"length2":24},{"diffs":[[0,"\n\t\t});\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t\tmapD"]],"start1":6420,"start2":6420,"length1":18,"length2":16},{"diffs":[[0,"nse) {\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tvar"]],"start1":6471,"start2":6471,"length1":19,"length2":16},{"diffs":[[0,"= map;\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tdoj"]],"start1":6520,"start2":6520,"length1":19,"length2":16},{"diffs":[[0,");\r\n\t\t\t});\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tif (i ="]],"start1":6706,"start2":6706,"length1":27,"length2":24},{"diffs":[[0,"n || \"\";\r\n\t\t\t}\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tvar layers "]],"start1":7660,"start2":7660,"length1":35,"length2":32},{"diffs":[[0,"ayers;\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tif("]],"start1":7733,"start2":7733,"length1":19,"length2":16},{"diffs":[[0,"AndTime();\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tif(map."]],"start1":7964,"start2":7964,"length1":27,"length2":24},{"diffs":[[0,");\r\n"],[-1,"        "],[0,"\r\n\t\t\t}"],[-1,"\t\t"],[0,"\r\n  "]],"start1":8145,"start2":8145,"length1":24,"length2":14},{"diffs":[[0,"\t\t\t});\r\n"],[-1,"       "],[0,""],[1,""],[0,"\r\n\t  \t})"]],"start1":8398,"start2":8398,"length1":23,"length2":16},{"diffs":[[0,");\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t});\r\n"],[-1,"\t"],[0,""],[1,""],[0,"\r\n\ts"]],"start1":8734,"start2":8734,"length1":19,"length2":16},{"diffs":[[0,"scalebar"],[-1," "],[0,""],[1,""],[0,"\r\n    va"]],"start1":8908,"start2":8908,"length1":17,"length2":16},{"diffs":[[0,"\n    });"],[-1," "],[0,"\r\n\r\n    "]],"start1":9050,"start2":9050,"length1":17,"length2":16},{"diffs":[[0,"layers);"],[-1,"      "],[0,"\r\n\r\n    "]],"start1":9098,"start2":9098,"length1":22,"length2":16},{"diffs":[[0,"dex;\r\n\t\t\t}\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tvar sta"]],"start1":9451,"start2":9451,"length1":27,"length2":24},{"diffs":[[0,"meExtent);\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\ttimeSli"]],"start1":9685,"start2":9685,"length1":27,"length2":24},{"diffs":[[0,"derDiv\"));\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tmap.set"]],"start1":9828,"start2":9828,"length1":27,"length2":24},{"diffs":[[0,"meSlider);\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\ttimeSli"]],"start1":9865,"start2":9865,"length1":27,"length2":24},{"diffs":[[0,"vingRate);\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tif(_tim"]],"start1":10010,"start2":10010,"length1":27,"length2":24},{"diffs":[[0,");\r\n\t\t  \t}\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t  \tif(ti"]],"start1":10335,"start2":10335,"length1":27,"length2":24},{"diffs":[[0,"\t\t  \t}\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tdoj"]],"start1":10427,"start2":10427,"length1":19,"length2":16},{"diffs":[[0,"tent){\r\n"],[-1,"\t\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\t\tva"]],"start1":10500,"start2":10500,"length1":20,"length2":16},{"diffs":[[0,"],'last');\r\n"],[-1,"\t\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\t\t_thumb"]],"start1":10961,"start2":10961,"length1":28,"length2":24},{"diffs":[[0,"eString;"],[-1," "],[0,""],[1,""],[0,"\r\n\t\t\t\tif"]],"start1":11055,"start2":11055,"length1":17,"length2":16},{"diffs":[[0,".units){"],[-1,"   "],[0,"\r\n\t\t\t\t\t\t"]],"start1":11174,"start2":11174,"length1":19,"length2":16},{"diffs":[[0,"turies':"],[-1,"\t"],[0,"\r\n\t\t\t  \t"]],"start1":11212,"start2":11212,"length1":17,"length2":16},{"diffs":[[0,"  \t\t\t\tbreak;"],[-1,"          "],[0,""],[1,""],[0,"\r\n\t\t\t\t\t\tcase"]],"start1":11258,"start2":11258,"length1":34,"length2":24},{"diffs":[[0,"\t\tbreak;"],[-1,"  "],[0,""],[1,""],[0,"\r\n\t\t\t \t\t"]],"start1":11346,"start2":11346,"length1":18,"length2":16},{"diffs":[[0,"sWeeks':"],[-1,"\t "],[0,""],[1,""],[0,"\r\n\t\t\t  \t"]],"start1":11468,"start2":11468,"length1":18,"length2":16},{"diffs":[[0,"\t\tbreak;"],[-1,"        "],[0,""],[1,""],[0,"\r\n\t\t\t\t\t\t"]],"start1":11613,"start2":11613,"length1":24,"length2":16},{"diffs":[[0,"  \t\t\t\tbreak;"],[-1,"          "],[0,""],[1,""],[0,"\r\n\t\t\t\t\t\tcase"]],"start1":11794,"start2":11794,"length1":34,"length2":24},{"diffs":[[0,"\t \t\t\t\tbreak;"],[-1,"          "],[0,""],[1,""],[0,"\r\n\t\t\t\t\t\tcase"]],"start1":11884,"start2":11884,"length1":34,"length2":24},{"diffs":[[0,"  \t\t\t\tbreak;"],[-1,"          "],[0,""],[1,""],[0,"\r\n\t\t\t\t\t\tcase"]],"start1":11972,"start2":11972,"length1":34,"length2":24},{"diffs":[[0,"\t\tbreak;"],[-1,"          "],[0,""],[1,""],[0,"\r\n\t\t  \t\t"]],"start1":12067,"start2":12067,"length1":26,"length2":16},{"diffs":[[0,"\t  \t\t}\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tdoj"]],"start1":12297,"start2":12297,"length1":18,"length2":16},{"diffs":[[0,"tring;\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tcen"]],"start1":12352,"start2":12352,"length1":19,"length2":16},{"diffs":[[0,"lay();\r\n"],[-1,"\t\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t  })"]],"start1":12379,"start2":12379,"length1":20,"length2":16},{"diffs":[[0,"\n\r\n\t\t  });\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\ttimeSli"]],"start1":12386,"start2":12386,"length1":27,"length2":24},{"diffs":[[0,"startup();\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tdojo.fo"]],"start1":12414,"start2":12414,"length1":27,"length2":24},{"diffs":[[0,"0.8\");\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tdoj"]],"start1":12677,"start2":12677,"length1":19,"length2":16},{"diffs":[[0,"s();\r\n\t}"],[-1,"\t"],[0,""],[1,""],[0,"\r\n}\r\n\r\nf"]],"start1":18329,"start2":18329,"length1":17,"length2":16},{"diffs":[[0,"omains\r\n"],[-1," "],[0,""],[1,""],[0,"\r\n      "]],"start1":19048,"start2":19048,"length1":17,"length2":16},{"diffs":[[0," = -1;\r\n"],[-1," "],[0,""],[1,""],[0,"\r\n      "]],"start1":19078,"start2":19078,"length1":17,"length2":16},{"diffs":[[0,"   });\r\n"],[-1," "],[0,""],[1,""],[0,"\r\n      "]],"start1":19332,"start2":19332,"length1":17,"length2":16},{"diffs":[[0,"false;\r\n"],[-1,"   "],[0,""],[1,""],[0,"\r\n      "]],"start1":19362,"start2":19362,"length1":19,"length2":16},{"diffs":[[0,"     }\r\n"],[-1," "],[0,""],[1,""],[0,"\r\n      "]],"start1":19882,"start2":19882,"length1":17,"length2":16},{"diffs":[[0,"\n     };"],[-1,"    "],[0,""],[1,""],[0,"\r\n    }\r"]],"start1":19914,"start2":19914,"length1":20,"length2":16},{"diffs":[[0,"\n    }\r\n"],[-1,"\t"],[0,""],[1,""],[0,"\r\n\tfunct"]],"start1":19923,"start2":19923,"length1":17,"length2":16},{"diffs":[[0,"apresults;\r\n\t}\r\n"],[-1,"\t"],[0,""],[1,""],[0,"\r\n\tfunction getT"]],"start1":20286,"start2":20286,"length1":33,"length2":32},{"diffs":[[0,"s;\r\n\t}\r\n"],[-1,"\t"],[0,"\r\n\tfunct"]],"start1":20633,"start2":20633,"length1":17,"length2":16}]],"length":20856,"saved":false}
{"contributors":[],"silentsave":true,"ts":1351619670472,"patch":[[{"diffs":[[0,"s.webmap"],[-1,"s"],[0," !== und"]],"start1":4978,"start2":4978,"length1":17,"length2":16}]],"length":20855,"saved":false}
{"ts":1351619676234,"patch":[[{"diffs":[[0,"s.webmap"],[-1,"s"],[0,");}\r\n\t\t\t"]],"start1":5052,"start2":5052,"length1":17,"length2":16}]],"length":20854,"saved":false}
{"ts":1351624685273,"patch":[[{"diffs":[[0," = ["],[-1,"previewWebMap, previewWebMap, "],[0,"prev"]],"start1":20213,"start2":20213,"length1":38,"length2":8}]],"length":20824,"saved":false}
{"ts":1351624735541,"patch":[[{"diffs":[[0," = ["],[-1,"previewTab, previewTab, "],[0,"prev"]],"start1":20534,"start2":20534,"length1":32,"length2":8}]],"length":20800,"saved":false}
{"ts":1351624738551,"patch":[[{"diffs":[[0,"ults = ["],[-1,"previewT"],[1,"t"],[0,"ab"],[1,"s"],[0,"];\r\n\t  }"]],"start1":20530,"start2":20530,"length1":26,"length2":20}]],"length":20794,"saved":false}
{"ts":1351624746825,"patch":[[{"diffs":[[0,"ults = ["],[-1,"t"],[1,"previewT"],[0,"ab"],[-1,"s"],[0,"];\r\n\t  }"]],"start1":20530,"start2":20530,"length1":20,"length2":26}]],"length":20800,"saved":false}
{"ts":1352141981126,"patch":[[{"diffs":[[0,"y.webmap"],[1,".unescape()"],[0,");\r\n\t\t  "]],"start1":2957,"start2":2957,"length1":16,"length2":27}]],"length":20823,"saved":false}
{"ts":1352143960176,"patch":[[{"diffs":[[0,"bmap"],[-1,".unescape()"],[0,");\r\n"]],"start1":2961,"start2":2961,"length1":19,"length2":8}]],"length":20812,"saved":false}
{"ts":1352144494619,"patch":[[{"diffs":[[0,"y.webmap"],[1,".unescape()"],[0,");\r\n\t\t  "]],"start1":2957,"start2":2957,"length1":16,"length2":27}]],"length":20823,"saved":false}
{"ts":1352144495674,"patch":[[{"diffs":[[0,"bmap"],[-1,".unescape()"],[0,");\r\n"]],"start1":2961,"start2":2961,"length1":19,"length2":8}]],"length":20812,"saved":false}
{"ts":1352144496451,"patch":[[{"diffs":[[0,"y.webmap"],[-1,")"],[0,";\r\n\t\t  }"]],"start1":2957,"start2":2957,"length1":17,"length2":16}]],"length":20811,"saved":false}
{"ts":1352144497528,"patch":[[{"diffs":[[0,"0].id = "],[-1,"getWebMaps("],[0,"urlObjec"]],"start1":2924,"start2":2924,"length1":27,"length2":16}]],"length":20800,"saved":false}
{"ts":1352144499064,"patch":[[{"diffs":[[0,"0].id = "],[1,"getWebMaps("],[0,"urlObjec"]],"start1":2924,"start2":2924,"length1":16,"length2":27},{"diffs":[[0,"y.webmap"],[1,")"],[0,";\r\n\t\t  }"]],"start1":2957,"start2":2957,"length1":16,"length2":17}]],"length":20812,"saved":false}
{"contributors":[],"silentsave":true,"ts":1352217634393,"patch":[[{"diffs":[[0,"0].id = "],[-1,"getWebMaps("],[0,"urlObjec"]],"start1":2924,"start2":2924,"length1":27,"length2":16}]],"length":20801,"saved":false}
{"ts":1352217635902,"patch":[[{"diffs":[[0,"y.webmap"],[-1,")"],[0,";\r\n\t\t  }"]],"start1":2946,"start2":2946,"length1":17,"length2":16}]],"length":20800,"saved":false}
{"ts":1352218072695,"patch":[[{"diffs":[[0,"\n\t\t  }\r\n"],[1,"          else if (dojo.isArray(urlObject.query.webmap) == false && getWebMaps(urlObject.query.webmap).length > 1){\r\n            configOptions.webmaps = getWebMaps(urlObject.query.webmap)\r\n    \t  }\r\n"],[0,"\t\t  else"]],"start1":2956,"start2":2956,"length1":16,"length2":215}]],"length":20999,"saved":false}
{"ts":1352218377215,"patch":[[{"diffs":[[0,"  };\r\n    }\r"],[1,"\n    \r\n    function getURLWebMaps(webmaps) {\r\n      if (webmaps.indexOf('%2C') !== -1) {\r\n    \tvar mapIds = webmaps.split('%2C');\r\n\t\twebmapresults = dojo.map(mapIds, function (mapId) {\r\n\t\t  return {\r\n\t\t\tid: mapId\r\n\t\t  };\r\n\t\t});\r\n\t  } else {\r\n\t\tvar previewWebMap = {\r\n\t\t  id: webmaps\r\n\t\t};\r\n\t\twebmapresults = [previewWebMap];\r\n\t  }\r\n\t  return webmapresults;\r\n\t}\r"],[0,"\n\r\n\tfunction"]],"start1":20115,"start2":20115,"length1":24,"length2":385}]],"length":21360,"saved":false}
{"ts":1352218377600,"patch":[[{"diffs":[[0,"\n    }\r\n"],[-1,"    "],[0,"\r\n    fu"]],"start1":20120,"start2":20120,"length1":20,"length2":16}]],"length":21356,"saved":false}
{"ts":1352218416705,"patch":[[{"diffs":[[0,"if ("],[-1,"dojo.isArray(urlObject.query.webmap) == false && "],[0,"get"],[1,"URL"],[0,"WebM"]],"start1":2979,"start2":2979,"length1":60,"length2":14},{"diffs":[[0,"ns.webmaps = get"],[1,"URL"],[0,"WebMaps(urlObjec"]],"start1":3058,"start2":3058,"length1":32,"length2":35}]],"length":21313,"saved":false}
{"ts":1352218499435,"patch":[[{"diffs":[[0,"lse if ("],[1,"dojo.isArray(urlObject.query.webmap) == false && "],[0,"get"],[-1,"URL"],[0,"WebMaps("]],"start1":2975,"start2":2975,"length1":22,"length2":68},{"diffs":[[0,"ebmaps = get"],[-1,"URL"],[0,"WebMaps(urlO"]],"start1":3108,"start2":3108,"length1":27,"length2":24}]],"length":21356,"saved":false}
{"ts":1352218501093,"patch":[[{"diffs":[[0," }\r\n"],[-1,"\r\n"],[0,"    "],[-1,"function getURLWebMaps(webmaps) {\r\n      if (webmaps.indexOf('%2C') !== -1) {\r\n    \tvar mapIds = webmaps.split('%2C');\r\n\t\twebmapresults = dojo.map(mapIds, function (mapId) {\r\n\t\t  return {\r\n\t\t\tid: mapId\r\n\t\t  };\r\n\t\t});\r\n\t  } else {\r\n\t\tvar previewWebMap = {\r\n\t\t  id: webmaps\r\n\t\t};\r\n\t\twebmapresults = [previewWebMap];\r\n\t  }\r\n\t  return webmapresults;\r\n\t}"],[1,"\r\n    "],[0,"\r\n\r\n"]],"start1":20124,"start2":20124,"length1":363,"length2":18}]],"length":21011,"saved":false}
{"ts":1352218501594,"patch":[[{"diffs":[[0,"}\r\n    \r"],[-1,"\n    \r"],[0,"\n\r\n\tfunc"]],"start1":20125,"start2":20125,"length1":22,"length2":16}]],"length":21005,"saved":false}
{"ts":1352218502580,"patch":[[{"diffs":[[0," }\r\n"],[-1,"          else if (dojo.isArray(urlObject.query.webmap) == false && getWebMaps(urlObject.query.webmap).length > 1){\r\n            configOptions.webmaps = getWebMaps(urlObject.query.webmap)\r\n    \t  }\r\n"],[0,"\t\t  "]],"start1":2960,"start2":2960,"length1":207,"length2":8},{"diffs":[[0,"  }\r"],[-1,"\n    \r"],[0,"\n\r\n\t"]],"start1":19924,"start2":19924,"length1":14,"length2":8}]],"length":20800,"saved":false}
{"ts":1352218504615,"patch":[[{"diffs":[[0,"y.webmap"],[1,")"],[0,";\r\n\t\t  }"]],"start1":2946,"start2":2946,"length1":16,"length2":17}]],"length":20801,"saved":false}
{"ts":1352218507366,"patch":[[{"diffs":[[0,"y.webmap"],[-1,")"],[0,";\r\n\t\t  }"]],"start1":2946,"start2":2946,"length1":17,"length2":16},{"diffs":[[0,"\n\t\t  }\r\n"],[1,"          else if (dojo.isArray(urlObject.query.webmap) == false && getWebMaps(urlObject.query.webmap).length > 1){\r\n            configOptions.webmaps = getWebMaps(urlObject.query.webmap)\r\n    \t  }\r\n"],[0,"\t\t  else"]],"start1":2956,"start2":2956,"length1":16,"length2":215},{"diffs":[[0,"  };\r\n    }\r"],[1,"\n    \r"],[0,"\n\r\n\tfunction"]],"start1":20115,"start2":20115,"length1":24,"length2":30}]],"length":21005,"saved":false}
{"ts":1352218508480,"patch":[[{"diffs":[[0,"  }\r"],[-1,"\n    \r"],[0,"\n\r\n\t"]],"start1":20123,"start2":20123,"length1":14,"length2":8}]],"length":20999,"saved":false}
{"ts":1352218511700,"patch":[[{"diffs":[[0,"  };\r\n    }\r"],[1,"\n    \r\n    \r"],[0,"\n\r\n\tfunction"]],"start1":20115,"start2":20115,"length1":24,"length2":36}]],"length":21011,"saved":false}
{"ts":1352218514186,"patch":[[{"diffs":[[0," }\r\n"],[-1,"          else if (dojo.isArray(urlObject.query.webmap) == false && getWebMaps(urlObject.query.webmap).length > 1){\r\n            configOptions.webmaps = getWebMaps(urlObject.query.webmap)\r\n    \t  }\r\n"],[0,"\t\t  "]],"start1":2960,"start2":2960,"length1":207,"length2":8},{"diffs":[[0,"  }\r"],[-1,"\n    \r\n    \r"],[0,"\n\r\n\t"]],"start1":19924,"start2":19924,"length1":20,"length2":8}]],"length":20800,"saved":false}
{"ts":1352218517401,"patch":[[{"diffs":[[0,"\n\t\t  }\r\n"],[1,"          else if (dojo.isArray(urlObject.query.webmap) == false && getWebMaps(urlObject.query.webmap).length > 1){\r\n            configOptions.webmaps = getWebMaps(urlObject.query.webmap)\r\n    \t  }\r\n"],[0,"\t\t  else"]],"start1":2956,"start2":2956,"length1":16,"length2":215}]],"length":20999,"saved":false}
{"ts":1352218709110,"patch":[[{"diffs":[[0,"){\r\n"],[-1,"\t\t  if (dojo.isArray(urlObject.query.webmap) == false){\r\n        \tconfigOptions.webmaps[0].id = urlObject.query.webmap;\r\n\t\t  }\r\n"],[0,"    "]],"start1":2832,"start2":2832,"length1":136,"length2":8},{"diffs":[[0,"\r\n          "],[-1,"else "],[0,"if (dojo.isA"]],"start1":2834,"start2":2834,"length1":29,"length2":24},{"diffs":[[0,"p)\r\n    "],[1,"      }\r\n\t\t  else if (dojo.isArray(urlObject.query.webmap) == false){\r\n        \tconfigOptions.webmaps[0].id = urlObject.query.webmap;\r\n\t"],[0,"\t  }\r\n\t\t"]],"start1":3016,"start2":3016,"length1":16,"length2":152}]],"length":21002,"saved":false}
{"ts":1352219186897,"patch":[[{"diffs":[[0,".webmap)"],[1,";\r\n            if(urlObject.query.tabs){\r\n              configOptions.tabTitles = getTabs(urlObject.query.tabs);\r\n            }"],[0,"\r\n      "]],"start1":3010,"start2":3010,"length1":16,"length2":143}]],"length":21129,"saved":false}
