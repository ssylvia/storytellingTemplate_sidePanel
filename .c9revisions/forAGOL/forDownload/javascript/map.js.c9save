{"ts":1349717123002,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"dojo.require(\"esri.map\");\r\ndojo.require(\"esri.dijit.Legend\");\r\ndojo.require(\"esri.dijit.Scalebar\");\r\ndojo.require(\"esri.arcgis.utils\");\r\ndojo.require(\"esri.IdentityManager\");\r\ndojo.require(\"dijit.dijit\"); // optimize: load dijit layer\r\ndojo.require(\"dijit.layout.BorderContainer\");\r\ndojo.require(\"dijit.layout.ContentPane\");\r\ndojo.require(\"esri.dijit.TimeSlider\");\r\ndojo.require(\"dojox.fx\");\r\ndojo.requireLocalization(\"esriTemplate\",\"template\");\r\n\r\nvar urlObject, i18n, _maps = [], timeoutComplete = false, timeSlider, _timeProperties = [], timeInterface = false, _thumbIndexes = [], mapsLoaded = 0, mapsReady = false, isPlaying = false, cm, mapExtent;\r\n\r\nvar toBoolean = function (str) {\r\n  switch (str.toLowerCase ()) {\r\n    case \"true\":\r\n      return true;\r\n    case \"false\":\r\n      return false;\r\n    default:\r\n      return true;\r\n  }\r\n};\r\n\r\nfunction initMap(){\r\n\tpatchID();\r\n\t\r\n\ti18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\r\n\tdojo.byId('loading').innerHTML = i18n.viewer.loading.message;\r\n\tdojo.byId('legendHeaderText').innerHTML = i18n.viewer.sidePanel.legendHeader;\r\n      \r\n      if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\r\n        configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\r\n      }\r\n      esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);  \r\n      \r\n\r\n\r\n      if(!configOptions.sharingurl){\r\n        configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\r\n      }\r\n      esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\r\n       \r\n      if(!configOptions.proxyurl){   \r\n        configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\r\n      }\r\n\r\n      esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\r\n\r\n      esri.config.defaults.io.alwaysUseProxy = false;\r\n      \r\n      urlObject = esri.urlToObject(document.location.href);\r\n      urlObject.query = urlObject.query || {};\r\n      \r\n      if(urlObject.query.title){\r\n        configOptions.title = urlObject.query.title;\r\n      }\r\n      if(urlObject.query.subtitle){\r\n        configOptions.subtitle = urlObject.query.subtitle;\r\n      }\r\n\t  if(urlObject.query.description){\r\n        configOptions.description = urlObject.query.description;\r\n      }\r\n\t  if(urlObject.query.displayDescription){\r\n        configOptions.displayDescription = toBoolean(urlObject.query.displayDescription);\r\n      }\r\n\t  if(urlObject.query.displayLegend){\r\n        configOptions.displayLegend = toBoolean(urlObject.query.displayLegend);\r\n      }\r\n\t  if(urlObject.query.loop){\r\n        configOptions.loop = toBoolean(urlObject.query.loop);\r\n      }\r\n\t  if(urlObject.query.syncMaps){\r\n        configOptions.syncMaps = toBoolean(urlObject.query.syncMaps);\r\n      }\r\n      if(urlObject.query.webmap){\r\n\t\t  if (dojo.isArray(urlObject.query.webmap) == false){\r\n        \tconfigOptions.webmaps[0].id = urlObject.query.webmap;\r\n\t\t  }\r\n\t\t  else{\r\n\t\t\tdojo.forEach(urlObject.query.webmap,function(webmap,i){\r\n\t\t\t  configOptions.webmaps[i] = {\"id\": webmap};\r\n\t\t\t  if(urlObject.query.tabTitle){\r\n\t\t\t\t  if (configOptions.tabTitles[i] == null || configOptions.tabTitles[i].title == \"\"){\r\n\t\t\t\t\t  if (dojo.isArray(urlObject.query.tabTitle) == false){\r\n\t\t\t\t\t\tif (i == 0){\r\n\t\t\t\t\t\t\tconfigOptions.tabTitles[0] = {\"title\": urlObject.query.tabTitle} || {\"title\": \"\"};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tconfigOptions.tabTitles[i] = {\"title\": \"\"};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t  else{\r\n\t\t\t\t\t\tconfigOptions.tabTitles[i] = {\"title\": urlObject.query.tabTitle[i]} || {\"title\": \"\"};\r\n\t\t\t\t\t  }\r\n\t\t\t\t  }\r\n\t\t\t  }\r\n\t\t\t  else{\r\n\t\t\t\t  configOptions.tabTitles[i] = {\"title\": \"\"};\r\n\t\t\t  }\r\n\t\t\t});\r\n\t\t  }\t\r\n      } \r\n      if(urlObject.query.bingMapsKey){\r\n        configOptions.bingmapskey = urlObject.query.bingMapsKey;      \r\n      }\r\n\t  \r\n\tcreateMap();\r\n}\r\n\r\nfunction createMap(){\r\n\tdojo.forEach(configOptions.webmaps, function(arg,i){\r\n\t\t\r\n\t\tif(configOptions.tabTitles[i] == null){\r\n\t\t\tconfigOptions.tabTitles[i] = {\"title\": \"\"};\r\n\t\t}\r\n\t\t\r\n\t\tdojo.place(\"<div id='mapDiv\"+i+\"' class='map'></div>\",dojo.byId('mapPane'),\"last\");\r\n\t\tif (configOptions.webmaps.length > 1){\r\n\t\t\tdojo.place(\"<h3 id='title\"+i+\"' class='mapTitle'></h3>\",dojo.byId('descriptionPanel'),\"last\");\r\n\t\t\tdojo.place(\"<div id='tab\"+i+\"' class='tab' onclick='changeMap(\"+i+\")'><p id='tabText\"+i+\"' class='tabText'></p></div>\",dojo.byId('tabArea'),\"last\");\r\n\t\t\tdojo.addClass(dojo.byId(\"tab0\"),\"selected\");\r\n\t\t}\r\n\t\tdojo.place(\"<div id='description\"+i+\"' class='description'></div>\",dojo.byId('descriptionPanel'),\"last\");\r\n\t\tdojo.place(\"<div id='legend\"+i+\"' class='legend'></div>\",dojo.byId('legendPanel'),\"last\");\r\n\t\t\r\n\t\tvar mapDeferred = esri.arcgis.utils.createMap(arg.id, \"mapDiv\"+i, {\r\n\t\t\tmapOptions: {\r\n\t\t\t\tslider: true,\r\n\t\t\t\tnav: false,\r\n\t\t\t\twrapAround180:true\r\n\t\t\t},\r\n\t\t\tignorePopups:false,\r\n\t\t\tbingMapsKey: configOptions.bingmapskey\r\n\t\t});\r\n\t\t\r\n\t\tmapDeferred.addCallback(function (response) {\r\n\t\t\t\r\n\t\t\tvar map = response.map\r\n\t\t\t_maps[i] = map;\r\n\t\t\t\r\n\t\t\tdojo.connect(map,'onClick',stopTime);\r\n\t\t\tdojo.connect(map,'onExtentChange',syncExtents)\r\n\t\t\tdojo.connect(map,\"onUpdateEnd\",function(){\r\n\t\t\t\tmapLoaded();\r\n\t\t\t\tplayAnimation();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif (i == 0){\r\n\t\t\t\tdocument.title = configOptions.title|| response.itemInfo.item.title || \"\";\r\n        \t\tdojo.byId(\"title\").innerHTML = configOptions.title ||response.itemInfo.item.title;\r\n        \t\tdojo.byId(\"subtitle\").innerHTML = configOptions.subtitle|| response.itemInfo.item.snippet || \"\";\r\n\t\t\t\tdojo.byId(\"description0\").innerHTML = configOptions.description|| response.itemInfo.item.description || \"\";\r\n\t\t\t\tif (configOptions.webmaps.length > 1){\r\n\t\t\t\t\tdojo.byId(\"title0\").innerHTML = response.itemInfo.item.title || \"\";\r\n\t\t\t\t\tdojo.byId(\"description0\").innerHTML = response.itemInfo.item.description || \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (configOptions.webmaps.length > 1){\r\n\t\t\t\tdojo.byId(\"tabText\"+i).innerHTML = configOptions.tabTitles[i].title || response.itemInfo.item.title || \"\";\r\n\t\t\t\tdojo.byId(\"title\"+i).innerHTML = response.itemInfo.item.title || \"\";\r\n\t\t\t\tdojo.byId(\"description\"+i).innerHTML = response.itemInfo.item.description || \"\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar layers = response.itemInfo.itemData.operationalLayers;\r\n\t\t\t\r\n\t\t\tif(response.itemInfo.itemData.widgets && response.itemInfo.itemData.widgets.timeSlider){\r\n\t\t\t\t_timeProperties[i] =  response.itemInfo.itemData.widgets.timeSlider.properties;\r\n\t\t\t\ttimeInterface = true;\r\n\t\t\t}\r\n\t\t\taddTabsAndTime();\r\n\t\t\t\r\n\t\t\tif(map.loaded){\r\n          \t\tinitUI(layers,i,map);\r\n        \t}\r\n        \telse{\r\n          \t\tdojo.connect(map,\"onLoad\",function(){\r\n\t\t\t\t\tinitUI(layers,i,map);\r\n\t\t\t\t});\r\n        \r\n\t\t\t}\t\t\r\n        \t//resize the map when the browser resizes\r\n\t\t\tdojo.connect(dijit.byId('mapPane'), 'resize', function(){\r\n\t\t\t\tdojo.forEach(_maps,function(map){\r\n\t\t\t\t\tif (map != null){\r\n\t\t\t\t\t\tmap.resize();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcenterTimeDisplay();\r\n\t\t\t});\r\n       \r\n\t  \t});\r\n\r\n      mapDeferred.addErrback(function (error) {\r\n          alert(i18n.viewer.errors.createMap+ \" \" + dojo.toJson(error.message));\r\n\t\t  mapsLoaded = configOptions.webmaps.length - 1;\r\n\t\t  mapLoaded();\r\n\t\t  dojo.destroy(dojo.byId(\"tab\"+i));\r\n\t\t  if (i==0){\r\n\t\t      alert(i18n.viewer.errors.timeout);\r\n\t\t  }\r\n      });\r\n\t\t\r\n\t});\r\n\t\r\n\tsetupLayout();\r\n}\r\n\r\n\r\nfunction initUI(layers,index,map) {\r\n\t//add chrome theme for popup\r\n    dojo.addClass(map.infoWindow.domNode, \"chrome\");\r\n    //add the scalebar \r\n    var scalebar = new esri.dijit.Scalebar({\r\n\t\tmap: map,\r\n        scalebarUnit: i18n.viewer.main.scaleBarUnits //metric or english\r\n    }); \r\n\r\n    var layerInfo = buildLayersList(layers);      \r\n\r\n    if(layerInfo.length > 0){\r\n\t\tvar legendDijit = new esri.dijit.Legend({\r\n\t\t\tmap:map,\r\n\t\t\tlayerInfos:layerInfo\r\n\t\t},\"legend\"+index);\r\n        legendDijit.startup();\r\n    }\r\n    else{\r\n        dojo.byId(\"legend\"+index).innerHTML = \"\";\r\n    }\r\n\tif (timeSlider == null){\r\n\t\tif(_timeProperties[index] != null){\r\n\t\t\tif(cm == null){\r\n\t\t\t\tcm = index;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar startTime = _timeProperties[index].startTime;\r\n\t\t\tvar endTime = _timeProperties[index].endTime;\r\n\t\t    var fullTimeExtent = new esri.TimeExtent(new Date(startTime), new Date(endTime));\r\n\t\t\tmap.setTimeExtent(fullTimeExtent);\r\n\t\t\t\r\n\t\t\ttimeSlider = new esri.dijit.TimeSlider({\r\n\t\t\t\tstyle: \"width: 100%;\",\r\n\t\t\t\tloop: configOptions.loop\r\n\t\t  \t}, dojo.byId(\"timeSliderDiv\"));\r\n\t\t\t\r\n\t\t\tmap.setTimeSlider(timeSlider);\r\n\t\t\t\r\n\t\t\ttimeSlider.setThumbCount(_timeProperties[index].thumbCount);\r\n\t\t    timeSlider.setThumbMovingRate(_timeProperties[index].thumbMovingRate);\r\n\t\t\t\r\n\t\t\tif(_timeProperties[index].numberOfStops){\r\n\t\t\t\ttimeSlider.createTimeStopsByCount(fullTimeExtent,_timeProperties[index].numberOfStops);\r\n\t\t  \t}\r\n\t\t\telse{\r\n\t\t\t\ttimeSlider.createTimeStopsByTimeInterval(fullTimeExtent,_timeProperties[index].timeStopInterval.interval,_timeProperties[index].timeStopInterval.units);\r\n\t\t  \t}\r\n\t\t\t\r\n\t\t  \tif(timeSlider.thumbCount == 2){\r\n\t\t\t\ttimeSlider.setThumbIndexes([0,1]);\r\n\t\t  \t}\r\n\t\t\t\r\n\t\t\tdojo.connect(timeSlider,'onTimeExtentChange',function(timeExtent){\r\n\t\t\t\t\r\n\t\t\t\tvar timeCon = dojo.query(\"#timeSliderDiv > table > tbody > tr > td\");\r\n\t\t\t\tdojo.place(\"<img id='playPause' class='timeControl' src='images/playIcon.png' alt='' onClick='animate()'>\",timeCon[0],'last');\r\n\t\t\t\tdojo.place(\"<img id='prev' class='timeControl' src='images/prevIcon.png' alt='' onClick='prevTime()'>\",timeCon[2],'last');\r\n\t\t\t\tdojo.place(\"<img id='next' class='timeControl' src='images/nextIcon.png' alt='' onClick='nextTime()'>\",timeCon[3],'last');\r\n\t\t\t\t\r\n\t\t\t\t_thumbIndexes[cm] = timeSlider.thumbIndexes\r\n\t\t\t\twaitForLoad();\r\n\t\t\t\tvar timeString; \r\n\t\t\t\tif(_timeProperties[cm].timeStopInterval !== undefined){\r\n\t\t\t\t\tswitch(_timeProperties[cm].timeStopInterval.units){   \r\n\t\t\t\t\t\tcase 'esriTimeUnitsCenturies':\t\r\n\t\t\t  \t\t\t\tdatePattern = 'yyyy G'\r\n\t\t\t  \t\t\t\tbreak;          \r\n\t\t\t\t\t\tcase 'esriTimeUnitsDecades':\r\n\t\t\t  \t\t\t\tdatePattern = 'yyyy'\r\n\t\t\t  \t\t\t\tbreak;  \r\n\t\t\t \t\t\tcase 'esriTimeUnitsYears':\r\n\t\t\t  \t\t\t\tdatePattern = 'MMMM yyyy'\r\n\t\t\t \t\t\t\t break;\r\n\t\t\t\t\t\tcase 'esriTimeUnitsWeeks':\t \r\n\t\t\t  \t\t\t\tdatePattern = 'MMMM d, yyyy'\r\n\t\t\t  \t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'esriTimeUnitsDays':\r\n\t\t\t  \t\t\t\tdatePattern = 'MMMM d, yyyy'\r\n\t\t\t  \t\t\t\tbreak;        \r\n\t\t\t\t\t\tcase 'esriTimeUnitsHours':\r\n\t\t\t  \t\t\t\tdatePattern = 'h:m:s.SSS a'\r\n\t\t\t  \t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'esriTimeUnitsMilliseconds':\r\n\t\t\t  \t\t\t\tdatePattern = 'h:m:s.SSS a'\r\n\t\t\t  \t\t\t\tbreak;          \r\n\t\t\t\t\t\tcase 'esriTimeUnitsMinutes':\r\n\t\t\t  \t\t\t\tdatePattern = 'h:m:s.SSS a'\r\n\t\t\t \t\t\t\tbreak;          \r\n\t\t\t\t\t\tcase 'esriTimeUnitsMonths':\r\n\t\t\t  \t\t\t\tdatePattern = 'MMMM d, y'\r\n\t\t\t  \t\t\t\tbreak;          \r\n\t\t\t\t\t\tcase 'esriTimeUnitsSeconds':\r\n\t\t\t  \t\t\t\tdatePattern = 'h:m:s.SSS a'\r\n\t\t\t  \t\t\t\tbreak;          \r\n\t\t  \t\t\t}\r\n\t\t   \t\t\ttimeString = formatDate(timeExtent.startTime,datePattern) + \" to \" + formatDate(timeExtent.endTime,datePattern);\r\n\t\t  \t\t}\r\n\t\t  \t\telse{\r\n\t\t\t\t\ttimeString = formatDate(timeExtent.endTime,'MMMM d,yyyy');\r\n\t\t  \t\t}\r\n\t\t\r\n\t\t\tdojo.byId('timeDisplay').innerHTML = timeString;\r\n\t\t\t\r\n\t\t\tcenterTimeDisplay();\r\n\t\t\t\t\r\n\t\t  });\r\n\t\t\t\r\n\t\t\ttimeSlider.startup();\r\n\t\t\t\r\n\t\t\tdojo.forEach(dojo.query(\".timeControl\"),function(qry){\r\n\t\t\t\tdojo.style(qry,\"display\",\"block\");\r\n\t\t\t});\r\n\t\t\tdojo.place(\"<div id='timeSliderBlind'></div>\",dojo.byId(\"timeSliderArea\"),\"last\");\r\n\t\t\tdojo.style(dojo.byId(\"timeSliderBlind\"),\"opacity\", \"0.8\");\r\n\t\t\t\r\n\t\t\tdojo.connect(dojo.byId(\"next\"),'onmousedown',function(){\r\n\t\t\t\tdojo.byId(\"next\").setAttribute(\"src\",\"images/nextIconDark.png\");\r\n\t\t\t});\r\n\t\t\tdojo.connect(dojo.byId(\"next\"),\"onmouseup\",function(){\r\n\t\t\t\tdojo.byId(\"next\").setAttribute(\"src\",\"images/nextIcon.png\");\r\n\t\t\t});\r\n\t\t\tdojo.connect(dojo.byId(\"prev\"),'onmousedown',function(){\r\n\t\t\t\tdojo.byId(\"prev\").setAttribute(\"src\",\"images/prevIconDark.png\");\r\n\t\t\t});\r\n\t\t\tdojo.connect(dojo.byId(\"prev\"),\"onmouseup\",function(){\r\n\t\t\t\tdojo.byId(\"prev\").setAttribute(\"src\",\"images/prevIcon.png\");\r\n\t\t\t});\r\n\t\t\tdojo.connect(dojo.byId(\"playPause\"),'onmousedown',function(){\r\n\t\t\t\tif (dojo.attr(dojo.byId(\"playPause\"),\"src\") == \"images/playIcon.png\"){\r\n\t\t\t\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/playIconDark.png\");\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/pauseIconDark.png\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction buildLayersList(layers){\r\n        //layers  arg is  response.itemInfo.itemData.operationalLayers;\r\n        var layerInfos = [];\r\n        dojo.forEach(layers, function(mapLayer, index){\r\n          var layerInfo = {};\r\n          if (mapLayer.featureCollection && mapLayer.type !== \"CSV\") {\r\n            if (mapLayer.featureCollection.showLegend === true) {\r\n              dojo.forEach(mapLayer.featureCollection.layers, function(fcMapLayer){\r\n                if (fcMapLayer.showLegend !== false) {\r\n                  layerInfo = {\r\n                    \"layer\": fcMapLayer.layerObject,\r\n                    \"title\": mapLayer.title,\r\n                    \"defaultSymbol\": false\r\n                  };\r\n                  if (mapLayer.featureCollection.layers.length > 1) {\r\n                    layerInfo.title += \" - \" + fcMapLayer.layerDefinition.name;\r\n                  }\r\n                  layerInfos.push(layerInfo);\r\n                }\r\n              });\r\n            }\r\n          } else if (mapLayer.showLegend !== false) {\r\n            layerInfo = {\r\n              \"layer\": mapLayer.layerObject,\r\n              \"title\": mapLayer.title,\r\n              \"defaultSymbol\": false\r\n            };\r\n            //does it have layers too? If so check to see if showLegend is false\r\n            if (mapLayer.layers) {\r\n              var hideLayers = dojo.map(dojo.filter(mapLayer.layers, function(lyr){\r\n                return (lyr.showLegend === false);\r\n              }), function(lyr){\r\n                return lyr.id\r\n              });\r\n              if (hideLayers.length) {\r\n                layerInfo.hideLayers = hideLayers;\r\n              }\r\n            }\r\n            layerInfos.push(layerInfo);\r\n          }\r\n        });\r\n        return layerInfos;\r\n      }\r\n\r\n\r\nfunction formatDate(date,datePattern){\r\n\treturn dojo.date.locale.format(date, {\r\n    \tselector: 'date',\r\n        datePattern: datePattern\r\n\t});\r\n}\r\n\r\nfunction mapLoaded(){\r\n\tvar timeout = setTimeout(\"timeoutError()\",10000);\r\n\tif (mapsLoaded == configOptions.webmaps.length - 1){\r\n\t\tif (mapsLoaded == configOptions.webmaps.length - 1){\r\n\t\t\tif (configOptions.webmaps.length == 1){\r\n\t\t\t\tif (_timeProperties[0] != null){\r\n\t\t\t\t\tdojo.style(dojo.byId(\"tabArea\"),\"height\",\"0px\");\r\n\t\t\t\t\tdojo.style(dojo.byId(\"banner\"),\"height\",\"165px\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdojo.forEach(_maps,function(map,i){\r\n\t\t\t\tif (i != 0){\r\n\t\t\t\t\tdojo.fadeOut({\r\n\t\t\t\t\t\tnode: dojo.byId(\"mapDiv\"+i),\r\n\t\t\t\t\t\tduration: 300\r\n\t\t\t\t\t}).play();\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tdojo.style(dojo.byId(\"legend\"+i),\"display\",\"block\");\r\n\t\t\t\t\tdojo.style(dojo.byId(\"description\"+i),\"display\",\"block\");\r\n\t\t\t\t\tif (configOptions.webmaps.length > 1){\r\n\t\t\t\t\t\tdojo.style(dojo.byId(\"title\"+i),\"display\",\"block\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdojo.place(dojo.byId('mapDiv0'),dojo.byId('mapPane'),'last');\r\n\t\t\tdojo.fadeOut({\r\n\t\t\t\tnode: dojo.byId(\"mapBlind\"),\r\n\t\t\t\tduration: 500\r\n\t\t\t}).play();\r\n\t\t\tvar t = setTimeout(\"dojo.style(dojo.byId('mapBlind'),'display','none')\",500);\r\n\t\t\tif (_timeProperties[0] == null){\r\n\t\t\t\tdojo.fadeOut({\r\n\t\t\t\t\tnode: dojo.byId(\"timeDisplay\"),\r\n\t\t\t\t\tduration: 1\r\n\t\t\t\t}).play();\r\n\t\t\t\tdojo.style(dojo.byId('timeDisplay'),'z-index','0');\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdojo.fadeOut({\r\n\t\t\t\t\tnode: dojo.byId(\"timeSliderBlind\"),\r\n\t\t\t\t\tduration: 500\r\n\t\t\t\t}).play();\r\n\t\t\t\tvar t = setTimeout(\"dojo.style(dojo.byId('timeSliderBlind'),'display','none')\",500);\r\n\t\t\t}\r\n\t\t\tmapsReady = true;\r\n\t\t\tmapsLoaded++\r\n\t\t\tdijit.byId(\"mainWindow\").layout();\r\n\t\t\tcm = 0;\r\n\t\t\tsyncExtents();\r\n\t\t\tesri.hide(dojo.byId(\"loadingCon\"));\r\n\t\t}\r\n\t\telse{\r\n\t\t\tmapsLoaded++\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction animate(){\r\n\tif(_timeProperties[cm] != null){\r\n\t\tif (isPlaying == false){\r\n\t\t\tisPlaying = true;\r\n\t\t\tplayAnimation();\r\n\t\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/pauseIcon.png\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\tisPlaying = false;\r\n\t\t\ttimeSlider.pause();\r\n\t\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/playIcon.png\");\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction stopTime(){\r\n\tif (timeSlider){\r\n\t\tisPlaying = false;\r\n\t\ttimeSlider.pause();\r\n\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/playIcon.png\");\r\n\t}\r\n}\r\n\r\nfunction playAnimation(){\r\n\tif(_timeProperties[cm] != null){\r\n\t\tif (isPlaying == true){\r\n\t\t\ttimeSlider.play();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction waitForLoad(){\r\n\tif(_timeProperties[cm] != null){\r\n\t\ttimeSlider.pause();\r\n\t}\r\n}\r\n\r\nfunction prevTime(){\r\n\tif(_timeProperties[cm] != null){\r\n\t\tisPlaying = false;\r\n\t\ttimeSlider.pause();\r\n\t\tdojo.byId(\"playPause\").setAttribute(\"src\",\"images/playIcon.png\");\r\n\t\ttimeSlider.previous();\r\n\t}\t\r\n}\r\n\r\nfunction syncExtents(){\r\n\tif (configOptions.syncMaps == true){\r\n\t\tif (_maps[cm]){\r\n\t\t\tif (_maps[cm].extent != mapExtent){\r\n\t\t\t\tmapExtent = _maps[cm].extent;\r\n\t\t\t\tdojo.forEach(_maps,function(map,i){\r\n\t\t\t\t\tif (i != cm){\r\n\t\t\t\t\t\tif(map){\r\n\t\t\t\t\t\t\tmap.setExtent(mapExtent);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction patchID() {  //patch id manager for use in apps.arcgis.com\r\n       esri.id._isIdProvider = function(server, resource) {\r\n       // server and resource are assumed one of portal domains\r\n \r\n       var i = -1, j = -1;\r\n \r\n       dojo.forEach(this._gwDomains, function(domain, idx) {\r\n         if (i === -1 && domain.regex.test(server)) {\r\n           i = idx;\r\n         }\r\n         if (j === -1 && domain.regex.test(resource)) {\r\n           j = idx;\r\n         }\r\n       });\r\n \r\n       var retVal = false;\r\n   \r\n       if (i > -1 && j > -1) {\r\n         if (i === 0 || i === 4) {\r\n           if (j === 0 || j === 4) {\r\n             retVal = true;\r\n           }\r\n         }\r\n         else if (i === 1) {\r\n           if (j === 1 || j === 2) {\r\n             retVal = true;\r\n           }\r\n         }\r\n         else if (i === 2) {\r\n           if (j === 2) {\r\n             retVal = true;\r\n           }\r\n         }\r\n         else if (i === 3) {\r\n           if (j === 3) {\r\n             retVal = true;\r\n           }\r\n         }\r\n       }\r\n \r\n       return retVal;\r\n     };    \r\n    }\r\n\t\r\n\tfunction timeoutError(){\r\n\t\tif (timeoutComplete == false && mapsLoaded < configOptions.webmaps.length - 1){\r\n\t\t\ttimeoutComplete = true;\r\n\t\t\tmapsLoaded = configOptions.webmaps.length - 1;\r\n\t\t\tmapLoaded();\r\n\t\t}\r\n\t}"]],"start1":0,"start2":0,"length1":0,"length2":18357}]],"length":18357}
{"contributors":[],"silentsave":true,"ts":1349717936519,"patch":[[{"diffs":[[0,"\r\n\r\n\r\n\r\n\r\n\r\n"],[1,"//build a list of layers to dispaly in the legend\r\n  "],[0,"function bui"]],"start1":12240,"start2":12240,"length1":24,"length2":77},{"diffs":[[0,"yers){\r\n"],[-1,"       "],[1,"\r\n"],[0," //layer"]],"start1":12332,"start2":12332,"length1":23,"length2":18},{"diffs":[[0,"ayers;\r\n"],[-1,"      "],[0,"  var la"]],"start1":12400,"start2":12400,"length1":22,"length2":16},{"diffs":[[0," = [];\r\n"],[-1,"      "],[0,"  dojo.f"]],"start1":12424,"start2":12424,"length1":22,"length2":16},{"diffs":[[0,"rs, function"],[1," "],[0,"(mapLayer, i"]],"start1":12451,"start2":12451,"length1":24,"length2":25},{"diffs":[[0,", index)"],[1," "],[0,"{\r\n     "]],"start1":12473,"start2":12473,"length1":16,"length2":17},{"diffs":[[0,"x) {\r\n      "],[-1,"   "],[-1," "],[0,"var layerInf"]],"start1":12479,"start2":12479,"length1":28,"length2":24},{"diffs":[[0,"Info = {};\r\n"],[-1,"    "],[0,"      if (ma"]],"start1":12500,"start2":12500,"length1":28,"length2":24},{"diffs":[[0,"SV\") {\r\n        "],[-1,"   "],[-1," "],[0,"if (mapLayer.fea"]],"start1":12572,"start2":12572,"length1":36,"length2":32},{"diffs":[[0,"== true) {\r\n"],[-1,"  "],[0,"            "]],"start1":12631,"start2":12631,"length1":26,"length2":24},{"diffs":[[0,"function"],[1," "],[0,"(fcMapLa"]],"start1":12703,"start2":12703,"length1":16,"length2":17},{"diffs":[[0,"apLayer)"],[1," "],[0,"{\r\n"],[-1,"  "],[0,"        "]],"start1":12716,"start2":12716,"length1":21,"length2":20},{"diffs":[[0,"                "],[1,"  "],[0,"\"layer\": fcMapLa"]],"start1":12819,"start2":12819,"length1":32,"length2":34},{"diffs":[[0,"                "],[1,"  "],[0,"\"title\": mapLaye"]],"start1":12875,"start2":12875,"length1":32,"length2":34},{"diffs":[[0,"apLayer.title,\r\n"],[1,"  "],[0,"                "]],"start1":12903,"start2":12903,"length1":32,"length2":34},{"diffs":[[0,"gth > 1) {\r\n"],[1,"  "],[0,"            "]],"start1":13046,"start2":13046,"length1":24,"length2":26},{"diffs":[[0,"\r\n              "],[-1,"  "],[0,"}\r\n"],[-1,"  "],[0,"            });\r"]],"start1":13207,"start2":13207,"length1":39,"length2":35},{"diffs":[[0," });\r\n          "],[-1,"  "],[0,"}\r\n          } e"]],"start1":13237,"start2":13237,"length1":34,"length2":32},{"diffs":[[0,"\r\n      "],[-1,"  "],[-1,"  "],[0,"} else i"]],"start1":13254,"start2":13254,"length1":20,"length2":16},{"diffs":[[0,"alse"],[-1,") {\r\n            layerInfo = {\r\n      "],[1," && mapLayer.layerObject) {\r\n      var showDefaultSymbol = false;\r\n      if (mapLayer.layerObject.version < 10.1 && (mapLayer.layerObject instanceof esri.layers.ArcGISDynamicMapServiceLayer || mapLayer.layerObject instanceof esri.layers.ArcGISTiledMapServiceLayer)) {\r\n        showDefaultSymbol = true;\r\n      }\r\n      layerInfo = {\r\n"],[0,"    "]],"start1":13298,"start2":13298,"length1":46,"length2":342},{"diffs":[[0,"bject,\r\n        "],[-1,"      "],[0,"\"title\": mapLaye"]],"start1":13668,"start2":13668,"length1":38,"length2":32},{"diffs":[[0,"title,\r\n        "],[-1,"    "],[-1,"  "],[0,"\"defaultSymbol\":"]],"start1":13702,"start2":13702,"length1":38,"length2":32},{"diffs":[[0,"l\": "],[-1,"false\r\n    "],[1,"showDefaultSymbol\r\n"],[0,"      "],[-1,"  "],[0,"};\r\n"],[-1,"    "],[0,"    "]],"start1":13731,"start2":13731,"length1":35,"length2":37},{"diffs":[[0," false\r\n        "],[-1,"   "],[-1," "],[0,"if (mapLayer.lay"]],"start1":13834,"start2":13834,"length1":36,"length2":32},{"diffs":[[0,".layers) {\r\n"],[-1,"  "],[0,"            "]],"start1":13862,"start2":13862,"length1":26,"length2":24},{"diffs":[[0,"layers, function"],[1," "],[0,"(lyr)"],[1," "],[0,"{\r\n             "]],"start1":13933,"start2":13933,"length1":37,"length2":39},{"diffs":[[0,"        "],[-1,"  "],[0,"}), func"]],"start1":14015,"start2":14015,"length1":18,"length2":16},{"diffs":[[0,"function"],[1," "],[0,"(lyr)"],[1," "],[0,"{\r\n     "]],"start1":14027,"start2":14027,"length1":21,"length2":23},{"diffs":[[0,"n lyr.id"],[1,";"],[0,"\r\n"],[-1,"  "],[0,"        "]],"start1":14066,"start2":14066,"length1":20,"length2":19},{"diffs":[[0,"           });\r\n"],[-1,"  "],[0,"            if ("]],"start1":14078,"start2":14078,"length1":34,"length2":32},{"diffs":[[0,"            "],[-1," "],[-1," "],[0,"}\r\n"],[-1,"    "],[0,"        }\r\n "]],"start1":14184,"start2":14184,"length1":33,"length2":27},{"diffs":[[0,"  }\r\n        }\r\n"],[-1,"    "],[0,"        layerInf"]],"start1":14194,"start2":14194,"length1":36,"length2":32},{"diffs":[[0,"    "],[-1,"      }\r\n      "],[1,"}\r\n"],[0,"  });\r\n"],[-1,"      "],[0,"  re"]],"start1":14247,"start2":14247,"length1":36,"length2":18},{"diffs":[[0,"Infos;\r\n"],[-1,"    "],[0,"  }\r\n\r\n\r"]],"start1":14275,"start2":14275,"length1":20,"length2":16}]],"length":18626,"saved":false}
{"ts":1349717937935,"patch":[[{"diffs":[[0,"hID();\r\n"],[-1,"\t"],[0,""],[1,""],[0,"\r\n\ti18n "]],"start1":872,"start2":872,"length1":17,"length2":16},{"diffs":[[0,"eader;\r\n"],[-1,"      "],[0,""],[1,""],[0,"\r\n      "]],"start1":1081,"start2":1081,"length1":22,"length2":16},{"diffs":[[0,"iceurl);"],[-1,"  \r\n      "],[1,"\r\n"],[0,"\r\n\r\n\r\n  "]],"start1":1385,"start2":1385,"length1":26,"length2":18},{"diffs":[[0,"ngurl;\r\n"],[-1,"       "],[0,"\r\n      "]],"start1":1608,"start2":1608,"length1":23,"length2":16},{"diffs":[[0,"oxyurl){"],[-1,"   "],[0,"\r\n      "]],"start1":1644,"start2":1644,"length1":19,"length2":16},{"diffs":[[0,"false;\r\n"],[-1,"      "],[0,""],[1,""],[0,"\r\n      "]],"start1":1876,"start2":1876,"length1":22,"length2":16},{"diffs":[[0,"|| {};\r\n"],[-1,"      "],[0,""],[1,""],[0,"\r\n      "]],"start1":1987,"start2":1987,"length1":22,"length2":16},{"diffs":[[0,";\r\n\t\t  }"],[-1,"\t"],[0,"\r\n      "]],"start1":3686,"start2":3686,"length1":17,"length2":16},{"diffs":[[0,"\n      }"],[-1," "],[0,"\r\n      "]],"start1":3695,"start2":3695,"length1":17,"length2":16},{"diffs":[[0,"MapsKey;"],[-1,"      "],[0,""],[1,""],[0,"\r\n      "]],"start1":3801,"start2":3801,"length1":22,"length2":16},{"diffs":[[0,"     }\r\n"],[-1,"\t  "],[0,""],[1,""],[0,"\r\n\tcreat"]],"start1":3812,"start2":3812,"length1":19,"length2":16},{"diffs":[[0,"rg,i){\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t\tif(c"]],"start1":3912,"start2":3912,"length1":18,"length2":16},{"diffs":[[0," \"\"};\r\n\t\t}\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t\tdojo.pla"]],"start1":4006,"start2":4006,"length1":26,"length2":24},{"diffs":[[0,"),\"last\");\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t\tvar mapD"]],"start1":4646,"start2":4646,"length1":26,"length2":24},{"diffs":[[0,"\n\t\t});\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t\tmapD"]],"start1":4882,"start2":4882,"length1":18,"length2":16},{"diffs":[[0,"nse) {\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tvar"]],"start1":4933,"start2":4933,"length1":19,"length2":16},{"diffs":[[0,"= map;\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tdoj"]],"start1":4982,"start2":4982,"length1":19,"length2":16},{"diffs":[[0,");\r\n\t\t\t});\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tif (i ="]],"start1":5168,"start2":5168,"length1":27,"length2":24},{"diffs":[[0,"n || \"\";\r\n\t\t\t}\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tvar layers "]],"start1":6116,"start2":6116,"length1":35,"length2":32},{"diffs":[[0,"ayers;\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tif("]],"start1":6189,"start2":6189,"length1":19,"length2":16},{"diffs":[[0,"AndTime();\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tif(map."]],"start1":6420,"start2":6420,"length1":27,"length2":24},{"diffs":[[0,");\r\n"],[-1,"        "],[0,"\r\n\t\t\t}"],[-1,"\t\t"],[0,"\r\n  "]],"start1":6601,"start2":6601,"length1":24,"length2":14},{"diffs":[[0,"\t\t\t});\r\n"],[-1,"       "],[0,""],[1,""],[0,"\r\n\t  \t})"]],"start1":6854,"start2":6854,"length1":23,"length2":16},{"diffs":[[0,");\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t});\r\n"],[-1,"\t"],[0,""],[1,""],[0,"\r\n\ts"]],"start1":7189,"start2":7189,"length1":19,"length2":16},{"diffs":[[0,"scalebar"],[-1," "],[0,""],[1,""],[0,"\r\n    va"]],"start1":7363,"start2":7363,"length1":17,"length2":16},{"diffs":[[0,"\n    });"],[-1," "],[0,"\r\n\r\n    "]],"start1":7505,"start2":7505,"length1":17,"length2":16},{"diffs":[[0,"layers);"],[-1,"      "],[0,"\r\n\r\n    "]],"start1":7553,"start2":7553,"length1":22,"length2":16},{"diffs":[[0,"dex;\r\n\t\t\t}\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tvar sta"]],"start1":7906,"start2":7906,"length1":27,"length2":24},{"diffs":[[0,"meExtent);\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\ttimeSli"]],"start1":8140,"start2":8140,"length1":27,"length2":24},{"diffs":[[0,"derDiv\"));\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tmap.set"]],"start1":8283,"start2":8283,"length1":27,"length2":24},{"diffs":[[0,"meSlider);\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\ttimeSli"]],"start1":8320,"start2":8320,"length1":27,"length2":24},{"diffs":[[0,"vingRate);\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tif(_tim"]],"start1":8465,"start2":8465,"length1":27,"length2":24},{"diffs":[[0,");\r\n\t\t  \t}\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t  \tif(ti"]],"start1":8790,"start2":8790,"length1":27,"length2":24},{"diffs":[[0,"\t\t  \t}\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tdoj"]],"start1":8882,"start2":8882,"length1":19,"length2":16},{"diffs":[[0,"tent){\r\n"],[-1,"\t\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\t\tva"]],"start1":8955,"start2":8955,"length1":20,"length2":16},{"diffs":[[0,"],'last');\r\n"],[-1,"\t\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\t\t_thumb"]],"start1":9416,"start2":9416,"length1":28,"length2":24},{"diffs":[[0,"eString;"],[-1," "],[0,""],[1,""],[0,"\r\n\t\t\t\tif"]],"start1":9510,"start2":9510,"length1":17,"length2":16},{"diffs":[[0,".units){"],[-1,"   "],[0,"\r\n\t\t\t\t\t\t"]],"start1":9629,"start2":9629,"length1":19,"length2":16},{"diffs":[[0,"turies':"],[-1,"\t"],[0,"\r\n\t\t\t  \t"]],"start1":9667,"start2":9667,"length1":17,"length2":16},{"diffs":[[0,"  \t\t\t\tbreak;"],[-1,"          "],[0,""],[1,""],[0,"\r\n\t\t\t\t\t\tcase"]],"start1":9713,"start2":9713,"length1":34,"length2":24},{"diffs":[[0,"\t\tbreak;"],[-1,"  "],[0,""],[1,""],[0,"\r\n\t\t\t \t\t"]],"start1":9801,"start2":9801,"length1":18,"length2":16},{"diffs":[[0,"sWeeks':"],[-1,"\t "],[0,""],[1,""],[0,"\r\n\t\t\t  \t"]],"start1":9923,"start2":9923,"length1":18,"length2":16},{"diffs":[[0,"\t\tbreak;"],[-1,"        "],[0,""],[1,""],[0,"\r\n\t\t\t\t\t\t"]],"start1":10068,"start2":10068,"length1":24,"length2":16},{"diffs":[[0,"  \t\t\t\tbreak;"],[-1,"          "],[0,""],[1,""],[0,"\r\n\t\t\t\t\t\tcase"]],"start1":10249,"start2":10249,"length1":34,"length2":24},{"diffs":[[0,"\t \t\t\t\tbreak;"],[-1,"          "],[0,""],[1,""],[0,"\r\n\t\t\t\t\t\tcase"]],"start1":10339,"start2":10339,"length1":34,"length2":24},{"diffs":[[0,"  \t\t\t\tbreak;"],[-1,"          "],[0,""],[1,""],[0,"\r\n\t\t\t\t\t\tcase"]],"start1":10427,"start2":10427,"length1":34,"length2":24},{"diffs":[[0,"\t\tbreak;"],[-1,"          "],[0,""],[1,""],[0,"\r\n\t\t  \t\t"]],"start1":10522,"start2":10522,"length1":26,"length2":16},{"diffs":[[0,"\t  \t\t}\r\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tdoj"]],"start1":10752,"start2":10752,"length1":18,"length2":16},{"diffs":[[0,"tring;\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tcen"]],"start1":10807,"start2":10807,"length1":19,"length2":16},{"diffs":[[0,"lay();\r\n"],[-1,"\t\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t  })"]],"start1":10834,"start2":10834,"length1":20,"length2":16},{"diffs":[[0,"\n\r\n\t\t  });\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\ttimeSli"]],"start1":10841,"start2":10841,"length1":27,"length2":24},{"diffs":[[0,"startup();\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tdojo.fo"]],"start1":10869,"start2":10869,"length1":27,"length2":24},{"diffs":[[0,"0.8\");\r\n"],[-1,"\t\t\t"],[0,""],[1,""],[0,"\r\n\t\t\tdoj"]],"start1":11132,"start2":11132,"length1":19,"length2":16},{"diffs":[[0,"s();\r\n\t}"],[-1,"\t"],[0,""],[1,""],[0,"\r\n}\r\n\r\nf"]],"start1":16782,"start2":16782,"length1":17,"length2":16},{"diffs":[[0,"omains\r\n"],[-1," "],[0,""],[1,""],[0,"\r\n      "]],"start1":17299,"start2":17299,"length1":17,"length2":16},{"diffs":[[0," = -1;\r\n"],[-1," "],[0,""],[1,""],[0,"\r\n      "]],"start1":17329,"start2":17329,"length1":17,"length2":16},{"diffs":[[0,"   });\r\n"],[-1," "],[0,""],[1,""],[0,"\r\n      "]],"start1":17583,"start2":17583,"length1":17,"length2":16},{"diffs":[[0,"false;\r\n"],[-1,"   "],[0,""],[1,""],[0,"\r\n      "]],"start1":17613,"start2":17613,"length1":19,"length2":16},{"diffs":[[0,"     }\r\n"],[-1," "],[0,""],[1,""],[0,"\r\n      "]],"start1":18133,"start2":18133,"length1":17,"length2":16},{"diffs":[[0,"\n     };"],[-1,"    "],[0,""],[1,""],[0,"\r\n    }\r"]],"start1":18165,"start2":18165,"length1":20,"length2":16},{"diffs":[[0,"\n    }\r\n"],[-1,"\t"],[0,"\r\n\tfunct"]],"start1":18174,"start2":18174,"length1":17,"length2":16}]],"length":18397,"saved":false}
{"contributors":[],"silentsave":true,"ts":1352141428840,"patch":[[{"diffs":[[0,"0].id = "],[1,"getWebMaps("],[0,"urlObjec"]],"start1":2924,"start2":2924,"length1":16,"length2":27},{"diffs":[[0,"y.webmap"],[1,")"],[0,";\r\n\t\t  }"]],"start1":2957,"start2":2957,"length1":16,"length2":17}]],"length":18409,"saved":false}
{"ts":1352141977790,"patch":[[{"diffs":[[0,"y.webmap"],[1,".unescape()"],[0,");\r\n\t\t  "]],"start1":2957,"start2":2957,"length1":16,"length2":27}]],"length":18420,"saved":false}
{"ts":1352143966580,"patch":[[{"diffs":[[0,"bmap"],[-1,".unescape()"],[0,");\r\n"]],"start1":2961,"start2":2961,"length1":19,"length2":8}]],"length":18409,"saved":false}
